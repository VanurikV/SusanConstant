define(["OK/utils/vanilla","OK/logger"],(function(e,r){"use strict";var n="/web-api/v2/",t=!0,a=0,i=!1,o="api.communication-error";function s(a,s,u){var l=function(e){return n+e}(a),c=function(e){return t?JSON.stringify(e,null,2):JSON.stringify(e)}(s);return new Promise((function(n,t){var a=e.ajax({contentType:"application/json; charset=utf-8",url:l,dataType:"json",data:c}),s=a.xhr;function f(){s.abort(),i=!0,p(),t({type:2,typeName:"ABORT",errorCode:"abort",errorMessage:s.statusText||"abort"})}function p(){u.signal&&u.signal.removeEventListener("abort",f)}u.signal&&u.signal.addEventListener("abort",f),a.then((function(e){i=!1,p();var r=e.response;r.success?n(r.result):t(r.error)}),(function(e){i||r.error(o),p(),i=!0,t({type:200,typeName:"SERVER_ERROR",errorCode:o,errorMessage:e.statusText||o})}))}))}var u={invoke:function(e,r,n){var t={id:++a},i=(n=n||{}).filter;return null!=r&&(t.parameters=r),null!=i&&(t.filter=i),s(e,t,n)}};return"undefined"!=typeof window&&(window.webapi=u),u}));
//# sourceMappingURL=/res/source-maps/js/app/webapi.js.map