define("OK/AjaxNavigationLog",["OK/logger"],(function(e){var t,n,r,i,o=!1;function s(e){if(e<0)return null;for(var t=[0,20,40,60,100,160,260,320,580,900],n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];if(e>r&&e<=i)return r+"-"+i}return t[t.length-1]+"+"}function a(e,t){for(var n=t.substring(Math.max(0,t.indexOf("?")+1)).split("&"),r=0;r<n.length;r++){var i=n[r];if(0===i.indexOf(e+"="))return i.substr(e.length+1)}return""}return{log:function(i,c,u){if(o){var l=function(e){for(var n=a("st.cmd",e),r=a("cmd",e),i=0;i<t.length;i++){var o=t[i];if(o.indexOf("_")>-1){var s=o.split("_"),c=s[0],u=s[1];if("*"===c&&r===u)return u;if(n===c&&r===u)return n+"_"+r}else if(n===o)return o}return""}(c);if(l.length>0){e.duration("ajaxrequestdatatime.send.time",i,r+"_"+l,n);var d=(h=i)<100?1:(h>2e3&&(h=2e3),100*~~(h/100));d&&e.success("ad","ajax_"+r+"_"+l,d)}}var h;if(u){var f=u.split(":"),p=f[0],m=Number(f[1])/1e6,g=s(i),v=s(m);g&&v&&(e.success("ajaxrequestdatatime.client.measure",p,g),e.success("ajaxrequestdatatime.server.measure",p,v))}},activate:function(e){var s,a,c;i||(s=e.textContent,a=e.getAttribute("data-region"),c=e.getAttribute("data-countrycode"),n=a,r=c,t=JSON.parse(s),o=!0,i=!0)},deactivate:function(){t.length=0,n="",r="",i=!1}}})),define("OK/utils/screens",{apply:function(e){var t,n;"true"===document.body.getAttribute("data-uic")&&OK.getCurrentDesktopModelId&&(t=OK.getCurrentDesktopModelId(),OK.Layers&&OK.Layers.isAnyLayerOpened()&&(n=t,t=OK.Layers.getTopLayerId()),t&&e.setRequestHeader("OK-Screen",t),n&&e.setRequestHeader("OK-PrevScreen",n))}}),define("OK/utils/utils",["jquery","OK/logger","OK/AjaxNavigationLog","OK/utils/screens"],(function(e,t,n,r){"use strict";var i=document.getElementById("hook_Cfg_GwtExperimentsCfg"),o=i?OK.util.parseJSON(i.innerHTML):{},s="data-";function a(e,t,n,r){e.split(OK.navigation.SPLITER).forEach((function(e,t){n[t]&&OK.hookModel.setHookContent(n[t],e,r)}))}function c(r,i,o,s){var a=window.performance.now(),u=e.ajax(r);return s.xhr=u,s.fail((function(){u.abort()})),u.done((function(e,o,c){n.log(window.performance.now()-a,r.url,c.getResponseHeader("X-Render-Time")),e&&c.responseText&&0===e.length&&0!==c.responseText.length&&"[]"!=c.responseText&&(t.error("ajax",o),t.clob("ajax",JSON.stringify({requestData:r,response:c.responseText})));var u=c.getResponseHeader("TKN");u&&OK.tkn.set(u),OK.state&&OK.state.processXhrResponse(c);var l=c.getResponseHeader("Redirect-Location");if(l)return i(l),void s.reject(c,o,"Redirect");var d=c.getResponseHeader(OK.CLIENT_FLAGS_HEADER);null!==d&&OK.setClientFlags(d),OK.util.processCssHeaders(c).then((function(){s.resolve(e,o,c)}))})),u.fail((function(e,t,n){o>0?"timeout"!=t&&r.timeout?setTimeout((function(){c(r,i,--o,s)}),r.timeout):c(r,i,--o,s):s.reject(e,t,n)})),s}function u(e,t,n){var r=n.getResponseHeader(OK.navigation.HEADER);return r?r.split(","):null}var l=null;function d(){return null!=l?{width:l.windowWidth,height:l.windowHeight}:{width:window.innerWidth,height:window.innerHeight}}function h(e){var t=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,right:0,bottom:0,left:0,width:0,height:0}}}(e),n=null===l?0:l.left,r=null===l?0:l.top;return{top:t.top+r,bottom:t.bottom+r,y:t.y+r,right:t.right+n,left:t.left+n,x:t.x+n,width:t.width,height:t.height,xShift:n,yShift:r}}return{ajax:function(t,n,i){arguments.length>1&&"function"!=typeof arguments[1]&&(i=n,n=void 0),i=i||0,n=n||function(e){OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e)};var o=t.data||{},s=t.beforeSend;return t.type=t.type||"POST","POST"===t.type&&t.contentType&&-1!=t.contentType.indexOf("application/json")?"string"!=typeof o&&(o=JSON.stringify(o)):o["gwt.requested"]=window.pageCtx.gwtHash,t.data=o,t.beforeSend=function(e,t){e.setRequestHeader("TKN",OK.tkn.get()),e.setRequestHeader("STRD",OK.isStateRedesign()),e.setRequestHeader("STRV",OK.getRedesignVersion()),e.setRequestHeader(OK.CLIENT_FLAGS_HEADER,OK.getClientFlags());var n=OK.getStatId();n&&e.setRequestHeader(OK.STAT_ID_HEADER,n),r.apply(e),s&&s.apply(this,arguments)},c(t,n,i,e.Deferred())},getBlockIds:u,updateBlockModelCallback:function(e,t,n,r){var i=u(0,0,n);i&&a(e,0,i,r)},updateBlocks:a,gwtExperimentsCfg:o,removeTags:function(e){return"string"==typeof e?e.replace(/<[^>]*>/g,""):e},isElementInViewport:function(e){var t=h(e),n=d();if(t.top<0||t.left<0||t.bottom>n.height||t.right>n.width)return!1;var r=(t.right+t.left)/2-t.xShift,i=(t.bottom+t.top)/2-t.yShift;return e.contains(document.elementFromPoint(r,t.top-t.yShift))||e.contains(document.elementFromPoint(t.right-t.xShift,i))||e.contains(document.elementFromPoint(r,t.bottom-t.yShift))||e.contains(document.elementFromPoint(t.left-t.xShift,i))},isElementPartiallyInViewport:function(e,t,n){if(!t)return this.isElementInViewport(e);var r=h(e),i=d(),o=Math.min(r.bottom,i.height)-Math.max(0,r.top),s=Math.min(r.right,i.width)-Math.max(0,r.left),a=e.offsetHeight,c=e.offsetWidth;return a||void 0===n?a*t<=o&&c*t<=s:!n&&null},isElementPartiallyInViewportWithOverlapCheck:function(e,t,n){var r=h(e);if(this.isElementPartiallyInViewport(e,t,n)){var i=(r.right+r.left)/2-r.xShift,o=(r.bottom+r.top)/2-r.yShift;return e.contains(document.elementFromPoint(i,r.top-r.yShift))||e.contains(document.elementFromPoint(r.right-r.xShift,o))||e.contains(document.elementFromPoint(i,r.bottom-r.yShift))||e.contains(document.elementFromPoint(r.left-r.xShift,o))}return!1},extendDeep:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&("object"!=typeof n[r]||Array.isArray(n[r])?e[r]=n[r]:e[r]=this.extendDeep(e[r],n[r]))}return e},urlBase64ToUint8Array:function(e){for(var t=(e+function(e,t){var n="";for(;t-- >0;)n+=e;return n}("=",(4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r},deferred:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}},getAttributesFromElement:function(e,t){"string"==typeof e&&(e=document.getElementById(e));for(var n={},r=0;r<e.attributes.length;r++){var i=e.attributes[r];0==i.name.indexOf(s)&&(n[i.name.substring(5)]=i.value)}return t&&e.parentNode.removeChild(e),n},getFormData:function(e,t){var n={},r=Array.prototype.slice.call(e.elements);return t&&(r=r.filter(t)),r.forEach((function(e){var t=e.name;if(t)switch(e.type){case"checkbox":n[t]=e.checked?"on":"off";break;case"radio":e.checked&&(n[t]=e.value);break;default:n[t]=e.value}})),n},parseJson:function(e){var t=e?e.replace(/<!--/gi,"").replace(/-->/gi,""):null;return t?JSON.parse(t):null},positiveId:function(){return OK.util.nextId()||OK.util.nextId()},saveParentFrameDimensions:function(e){l=e}}})),define("OK/utils/vanilla",["OK/AjaxNavigationLog","OK/utils/screens"],(function(e,t){"use strict";function n(e){var t=[],n=function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];Array.isArray(i)?i.forEach(n.bind(null,r)):n(r,e[r])}return t.join("&")}function r(r,i){var o=r.type||"POST",s=r.data||{},a=r.contentType,c=r.dataType,u=r.responseType,l=r.url||"",d=r.isExternal||/^(https?:)?\/\//.test(l),h={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},f=r.headers||{},p={},m=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,g=r.beforeOpen,v=new XMLHttpRequest;if(i||(i=function(e){OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e)}),"POST"===o&&"string"!=typeof s)if(r.isFileUpload){f["Content-Type"]="application/octet-stream";var _=(s.name||"1.jpg").replace(/[^\u0000-\u007F]+/gi,"_").substring(0,255);f["Content-Disposition"]='attachment; filename="'+_+'"'}else f["Content-Type"]="application/x-www-form-urlencoded",window.pageCtx.gwtHash&&(s["gwt.requested"]=window.pageCtx.gwtHash),s=n(s);a&&h.hasOwnProperty(a)&&!f.hasOwnProperty("Content-Type")&&(f["Content-Type"]=h[a]),c&&h.hasOwnProperty(c)&&!f.hasOwnProperty("Accept")&&(f.Accept="*"===c?h[c]:h[c]+", */*; q=0.01"),d||f.hasOwnProperty("TKN")||(f.TKN=OK.tkn.get()),d||f.hasOwnProperty("STRD")||(f.STRD=OK.isStateRedesign()),d||f.hasOwnProperty("STRV")||(f.STRV=OK.getRedesignVersion()),d||(f[OK.CLIENT_FLAGS_HEADER]=OK.getClientFlags());var y=OK.getStatId();!d&&y&&(f[OK.STAT_ID_HEADER]=y);var E=new Promise((function(n,a){var h=window.performance.now();for(var _ in g&&g({xhr:v}),v.open(o,l,!0),f)f.hasOwnProperty(_)&&v.setRequestHeader(_,f[_]);d||t.apply(v),u&&(v.responseType=u),v.onreadystatechange=function(){if(v.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var t,r=v.getAllResponseHeaders();t=m.exec(r);)p[t[1].toLowerCase()]=t[2];if(!d&&p["redirect-location"])return i(p["redirect-location"]),void a(v,v.statusText,"Redirect")}if(v.readyState===XMLHttpRequest.DONE)if(v.status>=200&&v.status<300||304===v.status){e.log(window.performance.now()-h,l,v.getResponseHeader("X-Render-Time"));var o=u?v.response:v.responseText,s=o;if("json"===c)try{s=JSON.parse(o)}catch(e){a(e)}!d&&p.tkn&&OK.tkn.set(p.tkn),!d&&p.hasOwnProperty(OK.CLIENT_FLAGS_HEADER)&&OK.setClientFlags(p[OK.CLIENT_FLAGS_HEADER]),!d&&OK.state&&window.OK.state.processXhrResponse(v),OK.util.processCssHeaders(v).then((function(){n({response:s,xhr:v})}))}else a(v)},v.onerror=function(){a(v)};var y=r.signal;y&&y.addEventListener("abort",(function(){v.abort(),a(v)})),v.send(s)}));return E.xhr=v,E}function i(e){var t=e.getResponseHeader(OK.navigation.HEADER);return t?t.split(","):null}function o(e,t){e.split(OK.navigation.SPLITER).forEach((function(e,n){t[n]&&OK.hookModel.setHookContent(t[n],e)}))}return{ajax:r,getJSON:function(e,t,n){return r(Object.assign({type:"GET",dataType:"json",url:e,data:t},n))},trigger:function(e,t,n){if(e&&3!==e.nodeType&&8!==e.nodeType){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}},encodeHtml:function(e){var t=document.createElement("div");return e.split(" ").map((function(e){return t.innerText=e,t.innerHTML})).join(" ")},extractParams:function(e){var t={},n=e&&e.indexOf("?");return n>-1&&e.substr(n+1).split("&").forEach((function(e){if(e.indexOf("=")>-1){var n=e.split("="),r=n[0],i=n[1];i=decodeURIComponent(i.replace(/\+/g,"%20")),t[r]=i}})),t},stringifyParams:n,appendParamsToUrl:function(e,t){return null!=t&&(e+=(-1===e.indexOf("?")?"?":"&")+n(t)),e},getBlockIds:i,updateBlocks:o,updateBlockModelCallback:function(e){var t=i(e.xhr);t&&o(e.response,t)},getFormData:function(e){return Array.prototype.slice.apply(e.getElementsByTagName("input")).reduce((function(e,t){return t.name&&(e[t.name]="checkbox"===t.type?t.checked?"on":"off":t.value),e}),{})},unescapeXml:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},stripTags:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},formatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}})),define("OK/utils/throttle",[],(function(){"use strict";
/*!
     * jQuery throttle / debounce - v1.1 - 3/7/2010
     * http://benalman.com/projects/jquery-throttle-debounce-plugin/
     *
     * Copyright (c) 2010 "Cowboy" Ben Alman
     * Dual licensed under the MIT and GPL licenses.
     * http://benalman.com/about/license/
     */return function(e,t,n,r){var i,o=0;return"boolean"!=typeof t&&(r=n,n=t,t=void 0),function(){var s=this,a=Date.now()-o,c=arguments;function u(){o=Date.now(),n.apply(s,c)}r&&!i&&u(),i&&clearTimeout(i),void 0===r&&a>e?u():!0!==t&&(i=setTimeout(r?function(){i=void 0}:u,void 0===r?e-a:e))}}})),define("OK/utils/debounce",["OK/utils/throttle"],(function(e){"use strict";return function(t,n,r){return void 0===r?e(t,n,!1):e(t,r,!1!==n)}})),define("OK/utils/requireBlock",["OK/utils/utils"],(function(e){"use strict";function t(){e.ajax({url:this.getAttribute("data-url")}).done(e.updateBlockModelCallback)}return{activate:function(e){e.addEventListener("click",t)},deactivate:function(e){e.removeEventListener("click",t)}}})),define("OK/utils/dom",[],(function(){"use strict";var e='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function t(e,t){if(e){if(11===e.nodeType){for(var n=[],r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.getElementsByClassName&&(n=n.concat(Array.prototype.slice.call(i.getElementsByClassName(t))))}return n}return Array.prototype.slice.call(e.getElementsByClassName(t))}return[]}function n(e,t,n,r){for(r||(e=e.parentElement);e;){if(t(e))return e;if(n&&n===e)return null;e=e.parentElement}return e}var r=void 0;return{byClass:t,firstByClass:function(e,n){var r=t(e,n);return r.length?r[0]:null},querySelector:function(e,t){return e.querySelector(t)},querySelectorAll:function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))},parent:function(e,t,n,r){for(r||(e=e.parentElement);e;){if(!t||!e.classList||e.classList.contains(t))return e;if(n&&n===e)return null;e=e.parentElement}return e},traverseParents:n,getParentsAttrValue:function(e,t,r){var i=function(e){return e.getAttribute(t)},o=n(e,i,r,!0);return o?i(o):null},forEach:function(e,t){return Array.prototype.slice.call(e).forEach(t),e},innerHeight:function(e){try{return window.getComputedStyle(e,null).getPropertyValue("height")}catch(t){return e.currentStyle.height}},outerSize:function(e,t,n){var r;if("svg"===e.nodeName){var i=e.getBoundingClientRect();r=t?i.width:i.height}else r=t?e.offsetWidth:e.offsetHeight;if(null!==r){if(n){var o=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle;r+=t?parseInt(o.marginLeft,10)+parseInt(o.marginRight,10):parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)}return r}return 0},remove:function(e){var t;Array.isArray(e)||(e=[e]),e.forEach((function(e){(t=e.parentNode)&&t.removeChild(e)}))},one:function(e,t,n){e.addEventListener(t,(function e(t){return t.target.removeEventListener(t.type,e),n.call(this,t)}))},removeAllListeners:function(e){var t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e),t},toElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},isTextEditorFocused:function(){var e=document.activeElement;return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.hasAttribute("contenteditable")},isEventListenerOptionsSupported:function(){if(void 0!==r)return r;try{var e={};Object.defineProperty(e,"passive",{get:function(){return r=!0,!1}}),window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){r=!1}return r},isFocusableElement:function(t){return t.matches(e)&&!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden")&&!("true"===t.dataset.withoutFocus)},getKeyboardFocusableElements:function(t){return Array.from(t.querySelectorAll(e)).filter(function(e){return this.isFocusableElement(e)}.bind(this))},extractFocusableElement:function(e){return e?this.isFocusableElement(e)?e:this.getKeyboardFocusableElements(e)[0]:null}}})),define("OK/utils/delegate",[],(function(){"use strict";function e(t){this.listenerMap=[{},{}],t&&this.root(t),this.handle=e.prototype.handle.bind(this)}e.prototype.root=function(e){var t,n=this.listenerMap;if(this.rootElement){for(t in n[1])n[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;for(t in this.rootElement=e,n[1])n[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},e.prototype.captureForType=function(e){return-1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},e.prototype.on=function(e,o,s,a){var c,u,l,d;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof o&&(a=s,s=o,o=null),void 0===a&&(a=this.captureForType(e)),"function"!=typeof s)throw new TypeError("Handler must be a type of Function");c=this.rootElement,(u=this.listenerMap[a?1:0])[e]||(c&&c.addEventListener(e,this.handle,a),u[e]=[]),o?/^[a-z]+$/i.test(o)?(d=o,l=n):/^#[a-z0-9\-_]+$/i.test(o)?(d=o.slice(1),l=i):(d=o,l=t):(d=null,l=r.bind(this));var h,f,p=u[e],m=!1;for(h=p.length-1;h>=0;h--)if(f=p[h],!(o&&o!==f.selector||s&&s!==f.handler)){m=!0;break}return m||p.push({selector:o,handler:s,matcher:l,matcherParam:d}),this},e.prototype.off=function(e,t,n,r){var i,o,s,a,c;if("function"==typeof t&&(r=n,n=t,t=null),void 0===r)return this.off(e,t,n,!0),this.off(e,t,n,!1),this;if(s=this.listenerMap[r?1:0],!e){for(c in s)s.hasOwnProperty(c)&&this.off(c,t,n);return this}if(!(a=s[e])||!a.length)return this;for(i=a.length-1;i>=0;i--)o=a[i],t&&t!==o.selector||n&&n!==o.handler||a.splice(i,1);return a.length||(delete s[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,r)),this},e.prototype.handle=function(e){var t,n,r,i,o,s,a=e.type,c=[],u="ftLabsDelegateIgnore";if(!0!==e[u]){switch(3===(s=e.target).nodeType&&(s=s.parentNode),r=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:c=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(c=c.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(c=c.concat(this.listenerMap[1][a]));break;case 3:c=this.listenerMap[0][a]}for(n=c.length;s&&n;){for(t=0;t<n&&(i=c[t]);t++)if(i.matcher.call(s,i.matcherParam,s)&&(o=this.fire(e,s,i)),!1===o)return e[u]=!0,void e.preventDefault();if(s===r)break;n=c.length,s=s.parentElement}}},e.prototype.fire=function(e,t,n){return n.handler.call(t,e,t)};var t=function(e){if(e){var t=e.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}}(Element);function n(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function r(e,t){return this.rootElement===window?t===document:this.rootElement===t}function i(e,t){return e===t.id}return e.prototype.destroy=function(){this.off(),this.root()},e})),define("OK/utils/copyText",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.copyText=void 0,e.copyText=function(e){var t=document.createElement("textarea");return t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy")?(document.body.removeChild(t),!0):(document.body.removeChild(t),!1)}})),define("OK/pms",["module","OK/utils/vanilla","OK/logger"],(function(e,t,n){"use strict";var r,i={},o=[],s={},a="$Hash$",c=e.config().timeout||6e4;function u(e){var t=i[e];return t&&t.data||{}}function l(e,t){var r={data:{}};return t&&t.data?r.data=JSON.parse(t.data):(console.warn("Error while loading PMS config: ",e),n.error("pms","Config was not loaded",e)),r[a]=t[a],i[e]=r,function(e){for(var t=s[e]||[],n=t.length;n--;)t[n]()}(e),u(e)}function d(){for(var e,t,n=[],r=0,s=o.length;r<s;r+=1)e=o[r],t=i[e],n.push({alias:e,hash:t[a]||"0"});return JSON.stringify(n)}function h(){t.ajax({url:"/web-api/upms",headers:{"Content-Type":"application/json"},data:d(),dataType:"json"}).then((function(e){for(var t,n=e.response,r=Object.keys(n),i=0,o=r.length;i<o;i+=1)l(t=r[i],n[t])}))}function f(e){e&&(-1===o.indexOf(e)&&o.push(e),!r&&c>0&&(r=window.setInterval(h,c)))}if("undefined"!=typeof window&&(window.cfgStore={getCfg:function(e){return f(e),u(e)},subscribe:function(e,t){s[e]||(s[e]=[]),s[e].push(t)}},void 0!==window.inline_resources&&void 0!==window.inline_resources.pms)){for(var p in window.inline_resources.pms)l(p,window.inline_resources.pms[p]),f(p);window.inline_resources.pms={}}return{load:function(e,n,r,o){o.isBuild?r():!function(e){return i.hasOwnProperty(e)}(e)?function(e){return t.ajax({type:"GET",url:"/web-api/pms?name="+encodeURIComponent(e),headers:{"Content-Type":"application/json"},dataType:"json"}).then((function(e){return Promise.resolve(e.response)}))}(e).then((function(t){r(l(e,t))})):r(u(e))}}})),define("OK/utils/wheelEventOptions",["require","exports","OK/pms!wheelEventsConfig"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWheelEventPassiveEnabled=void 0,e.isWheelEventPassiveEnabled=function(){return t.wheelEventsPassive}})),define("OK/cookie",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpireTimeUnit=e.SECOND_MS=e.MINUTE_MS=e.HOUR_MS=e.DAY_MS=e.storeCookie=e.clearCookie=e.readCookie=e.setCookie=void 0;var t=1e3;e.SECOND_MS=t;var n=6e4;e.MINUTE_MS=n;var r=36e5;e.HOUR_MS=r;var i,o=864e5;e.DAY_MS=o,function(e){e[e.Day=0]="Day",e[e.Hour=1]="Hour",e[e.Minute=2]="Minute",e[e.Second=3]="Second"}(i||(i={})),e.ExpireTimeUnit=i;var s={};function a(e,t,n,r,o,a){void 0===a&&(a=i.Day);var c="";if(0===n)c=";expires=Thu, 01 Jan 1970 00:00:00 GMT";else if(n){n*=s[a];var u=new Date;u.setTime(u.getTime()+n),c=";expires="+u.toUTCString()}document.cookie=e+"="+encodeURIComponent(t)+c+(r?";path="+r:"")+(o?";domain="+o:"")}s[i.Day]=o,s[i.Hour]=r,s[i.Minute]=n,s[i.Second]=t,e.setCookie=a,e.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(i.startsWith(t))return i.substring(t.length)}return null},e.clearCookie=function(e,t){a(e,"",0,t)},e.storeCookie=function(e,t,n){document.cookie=e+"="+encodeURIComponent(t)+(n||"")}})),define("OK/utils/environment",["require","exports","OK/cookie"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTouchableMobile=e.isGecko=e.isSeleniumMode=e.isDebug=void 0;var n=window.navigator,r=n.userAgent.toLowerCase(),i=n.platform?n.platform.toLowerCase():"",o=null!==(0,t.readCookie)("_okSat");e.isSeleniumMode=o;var s="true"===(0,t.readCookie)("dme")||null!==document.getElementById("__gwtd__m");e.isDebug=s;var a=r.indexOf("chrome")>-1,c=!a&&(r.indexOf("webkit")>-1||r.indexOf("khtml")>-1),u=c&&r.indexOf("android")>-1,l=c&&r.indexOf("iphone")>-1,d=c&&(r.indexOf("ipad")>-1||i.indexOf("ipad")>-1),h=!c&&!a&&r.indexOf("gecko")>-1;e.isGecko=h;var f=l||d||u;e.isTouchableMobile=f})),define("OK/utils/inputCaretPosition",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCaretCoordinates=void 0;var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;e.getCaretCoordinates=function(e,i,o){if(void 0===o&&(o=!1),!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);var a=s.style,c=window.getComputedStyle(e),u="INPUT"===e.nodeName;a.whiteSpace="pre-wrap",u||(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",t.forEach((function(e){if(u&&"lineHeight"===e)if("border-box"===c.boxSizing){var t=parseInt(c.height),n=parseInt(c.paddingTop)+parseInt(c.paddingBottom)+parseInt(c.borderTopWidth)+parseInt(c.borderBottomWidth),r=n+parseInt(c.lineHeight);a.lineHeight=t>r?t-n+"px":t===r?c.lineHeight:"0"}else a.lineHeight=c.height;else a[e]=c[e]})),r?e.scrollHeight>parseInt(c.height)&&(a.overflowY="scroll"):a.overflow="hidden",s.textContent=e.value.substring(0,i),u&&(s.textContent=s.textContent.replace(/\s/g," "));var l=document.createElement("span");l.textContent=e.value.substring(i)||".",s.appendChild(l);var d={top:l.offsetTop+parseInt(c.borderTopWidth),left:l.offsetLeft+parseInt(c.borderLeftWidth),width:0,height:parseInt(c.lineHeight)};if(document.body.removeChild(s),o){var h=e.getBoundingClientRect();d.top+=h.top,d.left+=h.left}return d}})),define("OK/EventFactoryForEventBus",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.eventFactory=void 0;var t=function(){this.list=[]};t.prototype._callHandler=function(e,t,n){return e.call(n,t),this},t.prototype.trigger=function(e){for(var t=this,n=t.list.slice(),r=arguments[1],i=[],o=0,s=n.length;o<s;o++){var a=n[o];a&&(a.once&&i.push(a),t._callHandler(a.handler,e||r,a.context))}return i.forEach((function(e){var n=t.list.indexOf(e);-1!==n&&t.list.splice(n,1)})),t},t.prototype.attach=function(e,n){return this.list.push(t.wrapMethod(e,n)),this},t.prototype.attachOnce=function(e,n){var r=t.wrapMethod(e,n);return r.once=!0,this.list.push(r),this},t.prototype.detach=function(e,t){for(var n=this.list,r=n.length;r-- >0;){var i=n[r];i.handler===e&&i.context===t&&n.splice(r,1)}return this},t.wrapMethod=function(e,t){return{context:t,handler:e,once:!1}},e.eventFactory={create:function(){return new t}}})),define("OK/EventBus",["require","exports","OK/EventFactoryForEventBus"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var n=function e(t){var n=this;this.listeners=new Map,this.emit=function(t,r){return void 0===r&&(r=null),e.emit({prefix:n.prefix,name:n.name,data:t,target:r})},this.on=function(t,r){var i=n.makeListener(t,r);return!!i&&(e.on(i),!0)},this.off=function(t){var r=n.listeners.get(t);r&&(e.off(r),n.listeners.delete(t))},this.isMe=function(e){return n.name===e.name&&n.prefix===e.prefix},this.makeListener=function(e,t){if(!n.listeners.has(e)){var r=n,i=function(n){var i=n.detail;if(!n.defaultPrevented&&r.isMe(i)&&(!t||!i.target||t!==i.target))return e(i.data)}.bind(n);return n.listeners.set(e,i),i}window.OK.logging.info("EventBus["+n.prefix+", "+n.name+"]: повторное добавление обработчика")},this.prefix=t.prefix,this.name=t.name};n.factory=function(e){return function(t){return n.create({prefix:e,name:t})}},e.EventBus=n,n.EVENT_NAME="okeventbus",n.eventHost=t.eventFactory.create(),n.registeredBuses=new Set,n.getRegisteredBuses=function(){return n.registeredBuses},n.getHost=function(){return n.eventHost},n.createEvent=function(e){return new CustomEvent(n.EVENT_NAME,{detail:e,bubbles:!1,cancelable:!0})},n.on=function(e){if(n.hasListener(e))throw new Error("EventBus: повторное добавление обработчика");n.eventHost.attach(e)},n.off=function(e){n.eventHost.detach(e)},n.emit=function(e){var t=n.createEvent(e);return n.eventHost.trigger(t),!t.defaultPrevented},n.findRegistered=function(e){var t=null;return n.registeredBuses.forEach((function(n){!t&&n.isMe(e)&&(t=n)})),t},n.create=function(e){return n.getInstance(e)},n.getInstance=function(e){var t=n.findRegistered(e);return t||(t=new n(e),n.getRegisteredBuses().add(t)),t},n.hasListener=function(e){return n.eventHost.list.some((function(t){return t.handler===e}))}})),define("OK/LogListenerEventBuses",["require","exports","OK/EventBus"],(function(require,e,t){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_TRIGGERED=e.EVENT_TYPE=void 0,e.EVENT_TYPE={CLICK:"click",SEEN:"seen"},e.EVENT_TRIGGERED=(n="trigger",t.EventBus.create({prefix:"logListener",name:n}))})),define("OK/LogClicks",["OK/logger","OK/utils/dom","OK/LogListenerEventBuses"],(function(e,t,n){"use strict";var r,i="data-l",o="data-log-click",s="["+i+"],["+o+"]",a="data-force",c="click",u="log.click",l=null;function d(e,t,n){t&&Object.keys(t).length&&(e.push(t),t.target&&!n.okTarget&&(n.okTarget=t.target))}function h(t){OK.logging.alert(u+" "+t),e.error(u,t)}function f(e){if(!e)return null;var t=e.getAttribute(i);return t||(t=e.getAttribute(o)),t}var p={t:"target",ti:"targetId",mB:"mtBlockType",gA:"groupActionType",fF:"feedFeatures",fP:"feedPosition",fL:"feedLocation",fD:"feedDetails",fO:"feedOwners",fI:"feedId",".r":"remove",rM:"removeMenu",".c":"content",".k":"comment",re:"reshare",".l":"like",e1:"entity1",e2:"entity2",uL:"userLink",gL:"groupLink",".a":"action"};function m(e){var t=-2;try{if(!e||0==e.length||/^{|^null&/i.test(e))return t=-1,JSON.parse(e);t=0;for(var n={},r=!1,i=!0,o="",s="",a="",c=e.length,u=0,l=0,d=0;d<c;d++){t=1;var f=e.charAt(d);r?(r=!1,l++):"\\"==f?(l>0&&(i?(t=2,o+=e.substr(u,l)):(t=3,s+=e.substr(u,l)),l=0),u=d+1,r=!0):","==f?(i?(l>0&&(t=4,o+=e.substr(u,l),l=0),i=!1):(l>0&&(t=5,s+=e.substr(u,l),l=0),i=!0,(a=p[o])&&(o=a),(a=p[s])&&(s=a),n[o]=s,o="",s=""),u=d+1):l++}return t=6,r?h("err: escapeNow - "+e):i?u!=c&&h("err: keyNow - "+e):(u<c&&(t=7,s+=e.substr(u)),(a=p[o])&&(o=a),(a=p[s])&&(s=a),n[o]=s),n}catch(n){return h("unkn err: stepN = "+t+", data = "+e+", e = "+n),{}}}function g(e){if(null==l&&function(){l=0;try{var e,t,n=performance.getEntriesByType("navigation");if(n&&n.length&&(e=(r=n[0]).serverTiming),e&&e.length)for(t=0;t<e.length;t+=1)if("from"===e[t].name){l=e[t].duration;break}}catch(e){l=0}}(),l>0)try{var t=Math.round(performance.now()-r.responseStart+l);e.push({adjustedTime:t})}catch(e){}}function v(t){var r,i,o=!1,u=[];try{(r=f(t.target))&&d(u,m(r),t);for(var l=t.target.parentElement;l;)l.matches(s)&&(r=f(l))&&d(u,m(r),t),l.hasAttribute(a)&&(o=!0),l=l.parentElement;if(u.length){g(u);var p=JSON.stringify(u);o?(i=p,OK.logging.info(c+" "+i),e.force(c,i)):function(t){OK.logging.info(c+" "+t),e.success(c,t)}(p),n.EVENT_TRIGGERED.emit({type:n.EVENT_TYPE.CLICK,payload:p},this)}}catch(e){h(e)}}return{activate:function(e){e.addEventListener("click",v,!0),OK.clickLog.incCounter()},deactivate:function(e){e.removeEventListener("click",v,!0),OK.clickLog.decCounter()},getLogDataAsString:f,parseLogData:m,getLogData:function(e){var t=f(e);if(t)return m(t)},updateLogData:function(e,t){var n=i;e.getAttribute(o)&&(n=o);var r=JSON.stringify(t);e.setAttribute(n,r)},copyLogData:function(e,t){var n=i;e.getAttribute(o)&&(n=o),t.setAttribute(n,e.getAttribute(n))},getClosestLogClickElement:function(e){return e.matches(s)?e:t.traverseParents(e,(function(e){return e.matches(s)}))},doLogOnElement:function(e){v({target:e})},LOG_ATTR_SELECTOR:s}})),define("OK/NewsFetchCoordinator",["OK/logger","OK/cookie"],(function(e,t){"use strict";var n,r,i,o,s,a="/push?cmd=PeriodicManager&gwt.requested="+window.pageCtx.gwtHash,c="p_sId",u="p_NLP",l="\x3c!--SP--\x3e",d="\x3c!--SSP--\x3e",h={responseText:"",open:function(){},setRequestHeader:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},f={pos:0,size:0,adaptive:0,tmzOffset:0,sum:0,values:[],updateDiff:function(e){var t,n=new Date,r=n.getTime()-e;return this.tmzOffset=-n.getTimezoneOffset(),this.values[this.pos++]=r,this.pos%=20,this.sum+=r,this.size<20?this.size++:this.sum-=this.values[this.pos],t=~~(this.sum/this.size),this.adaptive!==t&&(this.adaptive=t,!0)},getTimeZoneHh:function(){var t=~~(this.tmzOffset/30);return(t<-24||t>28)&&e.error("NFCI_TZ"),t},getTimeDiff:function(){return isNaN(this.adaptive)&&e.error("NFCI_TD"),this.adaptive}},p=100,m=5e3,g=0,v=0,_=!1,y=2097152,E=2,O=[],T=0,w=15e4,L=18e4,I=18e4,b=0,A=6e4,S=18e4,C={},P=[],k=null,N=null,x=null,R=!1,D=h,K=0,M=0,H=0,B=0,F=0,U=0,G=0,j=0,Y="LP",q=!1,X=!1,W=function(e){return e>=1e3?e=1e3:e>=500?e=500:e>=100?e=100:e>=50?e=50:e>=10&&(e=10),e},V=function(){return c+"="+g},z=function(){!R&&re()||$(m)},J=function(){if("SSE"===Y){var t=Date.now();if(t-(0===H?A:S)<K)return S=ne(),void(x=setTimeout(J,S));0===H&&(ye("Restore connection"),e.success("push","restoresse")),q||!ce(D.responseText||"")?(le("heartbeat-sse-"+F),e.success("push","chunks",F+"_"+W(U)),e.success("push","chunks-all",F+"_"+W(G)),++F>=E&&(Y="LP",M=t),te(p)):(q=!0,k=setTimeout(Q,0),x=setTimeout(J,I),e.success("push","check"))}else R=!1,g=0,le("heartbeat-lp"),Z(p)},$=function(e){clearTimeout(N),N=setTimeout(z,e)},Q=function(){0!==H&&(3===D.readyState&&ae(),k=setTimeout(Q,1e3))},Z=function(e){$(p=e)},ee=function(){clearTimeout(N),N=null,clearTimeout(x),x=null,R=!1,0!==H&&le("stop-sse"),_e()},te=function(e){R=!1,N&&$(e)},ne=function(){return"SSE"===Y?0==g?L:I:w},re=function(){try{ye("send"),"LP"===Y&&b>0&&G>2&&_&&Date.now()-M>b&&(j++,e.success("push","recovery",j+"-"+W(G)),q=!1,F=0,g=0,Y="SSE");var t="SSE"===Y;if(n){if(n())return!1}else e.error("NFCI_ER","foe-udf");clearTimeout(x),S=ne(),x=setTimeout(J,S),R=!0,r?ie(t):(e.error("NFCI_ER","prc-udf"),te(m))}catch(t){return R=!1,e.error("NFCI_ER","trc"),!1}return!0},ie=function(t){(D=function(){try{return new window.XMLHttpRequest}catch(t){e.success("push","xhr");try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return e.error("NFCI_AXO"),h}}}()).open("POST",a+(t?"&sse=true":"")+"&"+V(),!0),D.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),D.setRequestHeader("Cache-Control","no-cache"),D.setRequestHeader("TKN",OK.tkn.get()),t?(D.onreadystatechange=D.onprogress=ae,B=0,U=0,H=1):D.onreadystatechange=oe,D.send(function(){var e,t="";for(e in C)C.hasOwnProperty(e)&&(t+=e+"="+C[e]+"&");return(t+="blocks="+P.join(",")+"&")+u+"="+v}()),t&&q&&(clearTimeout(k),k=setTimeout(Q,0))},oe=function(){if(4===D.readyState)if(200===D.status){if(de(D.getResponseHeader("Redirect-Location")))return e.success("push","redirect"),void te(m);se(D),te(p)}else e.success("push","status",""+D.status),te(m)},se=function(e){var t=OK.lss&&OK.lss.isMaster(),n=""+[t?OK.lss.getId():"",e.responseText,e.getResponseHeader("Rendered-Blocks"),e.getResponseHeader("TKN")].join(l);t&&ue(n),r(n,!1)},ae=function(){if(!(D.readyState<3))if(1===H)if(200===D.status){if(de(D.getResponseHeader("Redirect-Location")))return le("redirect-sse"),void te(m);H=2}else le("status-sse-"+D.status),te(m);else if(2===H)switch(D.readyState){case 3:ce(D.responseText||"");break;case 4:var e=p;0===D.status?e=m:!ce(D.responseText||"")&&D.getResponseHeader("Rendered-Blocks")&&se(D),H=0,te(e)}},ce=function(t){for(var n,i,o,s=!1;~(n=t.indexOf(d,B));)(i=t.substring(B,n))&&(i=""+[(o=OK.lss&&OK.lss.isMaster())?OK.lss.getId():"",i].join(l),o&&ue(i),r(i,!1)),B=n+10,K=Date.now(),s=!0,U<1e3&&U++,G<1e3&&G++,F=0;return B>y&&e.success("push","overflow"),s},ue=function(t){try{localStorage.setItem("firePushContent",t)}catch(u){i?i():e.error("NFCI_ER","dop-udf");try{var n=u.message||"",r=t.length,o="pushData";for(var s in localStorage)if(localStorage.hasOwnProperty(s)){var a=localStorage.getItem(s).length;n+="\n"+s+"="+a,a>r&&(r=a,o=s)}var c=r;c=c>3e6?3e6:c>2e6?2e6:c>1e6?1e6:c>5e5?5e5:c>1e5?1e5:c>1e4?1e4:1e3,e.clob("push",n,"NFCI_LSIS_"+o,""+c)}catch(t){e.clob("push",t.stack,"NFCI_LSISE")}}},le=function(t){"SSE"===Y&&(H=0,g=0),D.abort(),e.success("push","abort",t)},de=function(e){return!!e&&(OK.navigation.redirect?OK.navigation.redirect(e):document.location.href=decodeURIComponent(e),!0)},he=0,fe=0,pe=0,me=null,ge=function(){var t=Date.now();0!=he&&t-he>fe&&x&&(clearTimeout(x),x=setTimeout(J,100),ye("wakeup")),0==he||x||"SSE"!==Y||t-S>K&&(n&&n()||e.success("push","noconnection")),he=t},ve=function(e,t){e>0&&OK.lss&&OK.lss.isMaster()?e==pe&&me||(_e(),me=setInterval(ge,e)):_e(),pe=e,fe=t},_e=function(){me&&(clearInterval(me),me=null)},ye=function(e){var n;((n=t.readCookie("dme"))&&"true"===n.toLowerCase()||document.getElementById("__gwtd__m"))&&console&&console.log(new Date,e)};return{isMaster:function(){return OK.lss&&OK.lss.isMaster()},getClientServerTimeDiff:function(){return f.adaptive},getCurrentServerTime:function(){return Date.now()-this.getClientServerTimeDiff()},updateParam:function(e,t){C[e]=t},addBlock:function(e){P.push(e),o&&o();for(var t=0;t<O.length;t++)if(e===O[t])return;"SSE"===Y&&(le("upd-block-"+e),te(p))},removeBlock:function(e){var t=P.indexOf(e);t>-1&&P.splice(t,1)},setConfiguration:function(n){var r,i;g=n[c]||g,v=n[u]||v,w=n.p_LPR||15e4,p=n.fetchTime||100,m=n.p_DFF||5e3,y=n.p_PSB||2097152,I=n.p_SRT||18e4,L=n.p_SFRRT||18e4,b=n.p_SLPT||0,E=n.p_SMF||2,A=n.p_SWT||6e4,X=!0===n.sTZDc,O=(n.cBlocks||"").split(","),S=ne(),r=!0===n.p_PSE,_!==r&&(F=0,K=0,_&&0!==H&&(ee(),Y="LP",Z(p)),Y=(_=r)?"SSE":"LP"),n.serverTime&&function(n){try{if(f.updateDiff(n)){var r=f.getTimeZoneHh(),i=f.getTimeDiff();t.setCookie("TZD",r+"."+i,null,"/"),X&&(t.setCookie("TZ",r,null,"/"),t.setCookie("TD",i,null,"/"))}}catch(t){e.error("NFCI_AST")}}(n.serverTime),(i=n.p_CES||0)!==T&&s(T=i),ve(n.p_WDI||0,n.p_WDTL||12e4);var o,a=n.params;if(a)for(o in a)a.hasOwnProperty(o)&&(C[o]=a[o])},init:function(e,t,a,c,u){n=e,r=t,i=a,o=c,s=u,q=!1},getStateParamString:V,scheduleFetch:function(){g=0,Z(p),ve(pe,fe)},stopScheduling:ee}})),define("OK/CommentWidgetsController",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addListener=e.unregisterCounter=e.registerCounter=e.setEnabled=e.setCount=e.updateCount=e.setOpenDiscussionFn=e.getOpenDiscussionFn=e.makeKey=void 0;var t,n={},r=[];function i(e,t){if(!isNaN(t)){var i=n[e];i&&i.count!==t&&(r.forEach((function(n){n.setCountInWidgets(e,t)})),i.count=t)}}function o(e,t){return t+"_"+e}e.makeKey=o,e.getOpenDiscussionFn=function(){return t},e.setOpenDiscussionFn=function(e){t=e},e.updateCount=function(e,t,r){r=parseInt(r,10);var s=o(e,t),a=n[s];if(a&&!isNaN(r)){var c=a.count;"number"!=typeof c||isNaN(c)||i(s,c+r)}},e.setCount=function(e,t,n){i(o(e,t),parseInt(n,10))},e.setEnabled=function(e,t,n){!function(e,t){r.forEach((function(n){n.setEnabled(e,t)}))}(o(e,t),n)},e.registerCounter=function(e,t){var r=n[e];t=parseInt(t,10),r||(r=n[e]={counters:0,count:t}),r.counters+=1,i(e,t)},e.unregisterCounter=function(e){var t=n[e];t&&(t.counters-=1,t.counters<1&&delete n[e])},e.addListener=function(e){r.push(e)}})),define("OK/CommentWidgets",["OK/utils/dom"],(function(e){var t,n={},r=function(e,t){return t+"_"+e},i=function(t,r){if(r=parseInt(r,10),!isNaN(r)&&n[t]&&n[t].count!==r){var i=n[t].elements;Array.isArray(i)&&i.forEach((function(i){var o=e.firstByClass(i,"js-count");if(o){e.parent(i,"widget").classList.toggle("__null",r<1),o.classList.toggle("__empty",r<1);var s=n[t].maxCount;o.textContent=s&&r>s?s+"+":r}})),n[t].count=r}};return{setOpenDiscussionFn:function(e){t=e},updateCount:function(e,t,o){o=parseInt(o,10);var s=r(e,t);if(n[s]){var a=n[s].count;void 0===a||isNaN(a)||i(s,a+o)}},setCount:function(e,t,n){n=parseInt(n,10);var o=r(e,t);i(o,n)},add:function(t,i,o){var s=r(t,i),a=e.firstByClass(o,"js-count");if(o&&a){n[s]||(n[s]={maxCount:a.getAttribute("data-maxCount")||1/0,elements:[]});var c=a.textContent.replace(/\s/g,"");if(!isNaN(+c)){var u=parseInt(c,10);isNaN(u)||(n[s].elements&&n[s].elements.push(o),n[s].count=u)}}},remove:function(e,t,i){var o=r(e,t),s=n[o];if(s&&i){var a=s.elements,c=a?a.indexOf(i):-1;c>-1&&(a.splice(c,1),0===a.length&&delete n[o])}},clickHandler:function(e){if(e.preventDefault(),t){var n=parseInt(this.getAttribute("data-id"),10),r=parseInt(this.getAttribute("data-type"),10),i=this.getAttribute("data-location");t(n,r,i)}},activate:function(e){if(e){var t=parseInt(e.getAttribute("data-id"),10),n=parseInt(e.getAttribute("data-type"),10),r="false"!==e.getAttribute("data-bind");this.add(t,n,e),r&&e.addEventListener("click",this.clickHandler)}},deactivate:function(e){e&&(e.removeEventListener("click",this.clickHandler),this.remove(parseInt(e.getAttribute("data-id"),10),parseInt(e.getAttribute("data-type"),10),e))}}})),define("OK/ReshareWidgetsController",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addListener=e.unregisterCounter=e.registerCounter=e.setCount=e.makeKey=void 0;var t={},n=[];function r(e,r){if(!isNaN(r)){var i=t[e];i&&i.count!==r&&(n.forEach((function(t){t.setCountInWidgets(e,r)})),i.count=r)}}function i(e,t,n){return n+"_"+e+"_"+t}e.makeKey=i,e.setCount=function(e,t,n,o){r(i(e,t,n),parseInt(o,10))},e.registerCounter=function(e,n){n=parseInt(n,10);var i=!1,o=t[e];o||(o=t[e]={counters:0,count:n},i=!0),o.counters+=1,(i||n>0)&&r(e,n)},e.unregisterCounter=function(e){var n=t[e];n&&(n.counters-=1,n.counters<1&&delete t[e])},e.addListener=function(e){n.push(e)}})),define("OK/StatLogger",["require","exports","OK/logger"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StatLogger=void 0;var n=function(e){this.statPrefix=e||""};n.valueToStr=function(e){return!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)},n.getStatParams=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.reduce((function(e,t){return null!=t&&e.push(n.valueToStr(t)),e}),[])},n.success=function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];t.success.apply(t,[e].concat(n))},n.error=function(e,r){var i=r?n.valueToStr(r):null;i?t.error(e,i):t.error(e)},n.force=function(e,n,r){t.force(e,n,r)},n.duration=function(e,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];t.duration.apply(t,[e,n].concat(r))},n.seen=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];n.success.apply(n,[n.SEEN_SUCCESS].concat(e))},n.clob=function(e,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];t.clob.apply(t,[e,n].concat(r))},n.prototype.getStatOperation=function(e){return""+this.statPrefix+e},n.prototype.success=function(e,t,r){n.success.apply(n,[this.getStatOperation(e)].concat(n.getStatParams(t,r)))},n.prototype.error=function(e,t){n.error(this.getStatOperation(e),t)},n.prototype.force=function(e,t,r){n.force.apply(n,[this.getStatOperation(e)].concat(n.getStatParams(t,r)))},n.prototype.duration=function(e,t,r,i){n.duration.apply(n,[this.getStatOperation(e),n.valueToStr(t)].concat(n.getStatParams(r,i)))},n.prototype.seen=function(e,t){n.seen.apply(n,n.getStatParams(e,t))},n.prototype.clob=function(e,t,r,i){n.clob.apply(n,[this.getStatOperation(e),n.valueToStr(t)].concat(n.getStatParams(r,i)))},e.StatLogger=n,n.SEEN_SUCCESS="seen"})),define("OK/FixedTopBock",["require","exports","OK/utils/throttle","OK/StatLogger"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FixedTopBock=void 0;var r="data-container",i="__active",o="__hidden",s="__bottom",a=function(){var e=this;this.containerIsWindow=!1,this.arrowIsBottom=!1,this.getScrollTop=function(){return e.containerIsWindow?window.pageYOffset:e.container.scrollTop},this.setScrollTop=function(t){e.containerIsWindow?window.scrollTo(0,t):e.container.scrollTop=t},this.onMouseEnter=function(){e.arrowIsBottom&&e.getScrollTop()>=e.scrollToTopHeight&&e.element.classList.remove(o)},this.onMouseLeave=function(){e.arrowIsBottom&&e.element.classList.add(o)},this.hide=function(){e.element.classList.remove(i)},this.onScroll=function(){if(e.useHeightComponentSelector){var t=document.querySelector(e.useHeightComponentSelector);t&&(e.element.style.top=t.getBoundingClientRect().height+16+"px")}var n=e.getScrollTop();e.lastScrollTopPosition=n,n>e.activateHeight+50?(e.element.classList.add(i),e.element.classList.remove(o),e.arrowButton.classList.remove(s),e.element.offsetTop,e.arrowIsBottom=!1):n<e.activateHeight&&!e.arrowIsBottom&&e.hide()},this.onClick=function(){e.statLogger.success("click"),e.arrowIsBottom?(e.setScrollTop(e.scrollToBottomHeight),e.arrowButton.classList.remove(s),e.arrowIsBottom=!1):(e.scrollToBottomHeight=e.getScrollTop(),e.setScrollTop(e.scrollToTopHeight),e.showBottom&&(e.arrowButton.classList.add(s),e.arrowIsBottom=!0))},this.deactivate=function(){e.element.classList.remove(i),(e.container||e.containerIsWindow)&&(e.arrowButton.removeEventListener("click",e.onClick),e.arrowButton.removeEventListener("mouseenter",e.onMouseEnter),e.arrowButton.removeEventListener("mouseleave",e.onMouseLeave),e.containerIsWindow?window.removeEventListener("scroll",e.boundScrollHandler):e.container.removeEventListener("scroll",e.boundScrollHandler),e.arrowButton=null,e.container=null)}};a.prototype.activate=function(e){this.element=e,this.id=this.element.getAttribute("id"),this.showBottom=this.element.hasAttribute(r),this.showBottom?this.container=document.getElementById(this.element.getAttribute(r)):this.containerIsWindow=!0,(this.container||this.containerIsWindow)&&(this.scrollToTopHeight=parseInt(this.element.getAttribute("data-height")||"0",10),this.activateHeight=parseInt(this.element.getAttribute("data-activate-height")||"500",10),this.scrollToBottomHeight=this.scrollToTopHeight,this.scrollStartTime=0,this.lastScrollTopPosition=0,this.useHeightComponentSelector=this.element.getAttribute("data-use-height-component-selector"),this.boundScrollHandler=t(10,this.onScroll),this.arrowButton=this.element.querySelector(".scroll-arrow"),this.arrowButton.addEventListener("click",this.onClick),this.arrowButton.addEventListener("mouseenter",this.onMouseEnter),this.arrowButton.addEventListener("mouseleave",this.onMouseLeave),this.containerIsWindow?window.addEventListener("scroll",this.boundScrollHandler):this.container.addEventListener("scroll",this.boundScrollHandler),this.statLogger=new n.StatLogger("fixed.top.block."+(this.id?this.id+".":"")))},e.FixedTopBock=a})),define("OK/mrg/projects",[],(function(){"use strict";var e,t,n="x-ph__menu_open",r="x-ph__menu_open_right",i="x-ph__menu_open_left";function o(){var o=this;this.toggleMenu=function(e){e.stopPropagation(),clearTimeout(t),t=null,o.box.classList.contains(n)?o.hideMenu():o.showMenu()},this.hideMenu=function(){document.removeEventListener("click",o.hideMenu),o.box.classList.remove(n),o.box.classList.remove(r),o.box.classList.remove(i)},this.showMenu=function(){document.addEventListener("click",o.hideMenu),o.box.classList.add(n),!0===document.getAttribute("css_force_right")||document.documentElement.clientWidth<1200&&e.clientWidth>600?o.box.classList.add(r):o.box.classList.add(i)},this.onMouseOver=function(){clearTimeout(t),t=null},this.onMouseOut=function(){clearTimeout(t),t=setTimeout(o.hideMenu,4e3)}}return o.prototype={activate:function(t){var n=this;this.link=t.querySelector(".portal-headline__menulink"),this.menu=t.querySelector(".portal-headline__menu"),this.box=t,e=document.getElementsByClassName("portal-headline__left")[0],null!==this.link&&null!==this.menu&&null!==this.box&&(this.link.addEventListener("click",n.toggleMenu,!1),this.link.addEventListener("mouseout",n.onMouseOut,!1),this.link.addEventListener("mouseover",n.onMouseOver,!1),this.menu.addEventListener("mouseout",n.onMouseOut,!1),this.menu.addEventListener("mouseover",n.onMouseOver,!1))},deactivate:function(){var e=this;this.link&&(this.link.removeEventListener("click",e.toggleMenu,!1),this.link.removeEventListener("mouseout",e.onMouseOut,!1),this.link.removeEventListener("mouseover",e.onMouseOut,!1)),this.menu&&(this.menu.removeEventListener("mouseout",e.onMouseOut,!1),this.menu.removeEventListener("mouseover",e.onMouseOver,!1)),this.link=this.menu=this.box=null}},o})),define("OK/mrg/Updater",["OK/utils/dom"],(function(e){"use strict";var t=document.head||document.getElementsByTagName("head")[0];function n(){this.counterStorage={}}return n.prototype.createCounter=function(t,n){var r=Number(t.getAttribute("data-timeout")),i=t.getAttribute("data-selector"),o=t.getAttribute("data-name"),s=t.getAttribute("data-url");if(s&&r>0){var a=e.byClass(t,i);this.counterStorage.hasOwnProperty(o)?this.counterStorage[o].counters=this.counterStorage[o].counters.concat(a):(this.counterStorage[o]={extract:n,counters:a,url:s,script:null,timer:null},window[o]=this.process.bind(this,o)),this.update(o),this.counterStorage[o].timer||(this.counterStorage[o].timer=setInterval(this.update.bind(this,o),r))}},n.prototype.removeCounter=function(n){var r=n.getAttribute("data-name"),i=n.getAttribute("data-selector"),o=e.byClass(n,i);if(this.counterStorage.hasOwnProperty(r)){var s=this.counterStorage[r];o.forEach((function(e){var t=s.counters.indexOf(e);-1!==t&&s.counters.splice(t,1)})),s.counters.length||(s.timer&&(clearInterval(s.timer),s.timer=null),s.script&&(t.removeChild(s.script),s.script=null))}},n.prototype.update=function(e){var n=this.counterStorage[e],r=document.createElement("script");r.type="text/javascript",r.src=n.url+"&JSONP_call="+e+"&rnd="+Math.random(),n.script&&t.removeChild(n.script),t.appendChild(r),n.script=r},n.prototype.process=function(e,t){var n=this.counterStorage[e].counters,r=this.counterStorage[e].extract;n.slice().forEach((function(e){var n=r(t,e)||"";e.parentNode.classList.toggle("x-ph__link_ext",!!n),e.textContent=n}))},new n})),define("OK/mrg/counters",["OK/mrg/Updater"],(function(e){"use strict";function t(e,t){var n=t.getAttribute("data-cnt");if(e&&"ok"===e.status&&e.data&&e.data[n]&&(e.data[n]>0||"99+"===e.data[n]))return e.data[n]}return{activate:function(n){e.createCounter(n,t)},deactivate:function(t){e.removeCounter(t)}}})),define("OK/mrg/wamba",["OK/mrg/Updater"],(function(e){"use strict";function t(e){if(e&&e.counter)return e.counter}return{activate:function(n){e.createCounter(n,t)},deactivate:function(t){e.removeCounter(t)}}})),define("OK/HookModel",["OK/utils/utils"],(function(e){var t={},n=e.deferred();return{init:function(e){n.resolve(e)},hookActivated:function(e){var n,r,i=t[e],o=new Promise((function(t,i){var o=OK.hookModel.getHookById(e);o?t(o.getInstance?o.getInstance():void 0):(n=t,r=i)}));return n&&r&&(o.resolve=n,o.reject=r,i&&i.length||(i=[],t[e]=i),i.push(o)),o},removeObserver:function(e,n){var r=t[n];if(r&&r.length){var i=r.indexOf(e);-1!=i&&r.splice(i,1)}},activatedCallback:function(e,n){var r=t[e];r&&(delete t[e],r.forEach((function(e){e.resolve(n)})))},extractHookId:function(e){return e.substring(e.lastIndexOf("_")+1)},createHook:function(e,t){return n.promise.then((function(n){n.createHook(e,t)}))}}})),define("OK/ToolbarBubble",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=e.create=e.unwrap=e.wrap=void 0;var t="notifications__hide",n="notifications__blink",r="notifications__reply",i="notifications__reaction",o="notifications__emptySmall",s={};function a(e,t){e.classList.add(t)}function c(e,t){e.classList.remove(t)}function u(e,t){return e.classList.contains(t)}function l(e){var t=document.getElementById(e);return t?new f(t):null}function d(e){var t=s[e];if(!t||!document.body.contains(t.getElement())){if(!(t=l(e)))return null;s[e]=t}return t}function h(e){s[e]&&delete s[e]}e.create=l,e.wrap=d,e.unwrap=h,e.activate=function(e){var t=e.getAttribute("id");t&&d(t)},e.deactivate=function(e){var t=e.getAttribute("id");t&&h(t)};var f=function(e){this.bubbleElement=e,this.textElement=e.children[0]||e,this.val=this.textElement.innerHTML&&parseInt(this.textElement.innerHTML,10)||0,this.isLong=e.classList.contains("js-long-counter"),this.isMsgCount=e.classList.contains("js-msg-count")};f.prototype.hide=function(){this.update(0)},f.prototype.decrease=function(e){this.update(this.val-e)},f.prototype.resetCustomIcon=function(){var e=this.bubbleElement;c(e,r),c(e,i),c(e,o),this.val||a(e,t)},f.prototype.update=function(e){e=e<0?0:e,this.val=e;var n,s=function(e,t){if(t){if(e>999)return"999+"}else if(e>99)return"99+";return e<=0?"":String(e)}(e,this.isLong),l=this.bubbleElement,d=this.textElement;s?d.innerHTML!==s&&(d.innerHTML=s,u(l,t)?(c(l,t),c(l,o)):this.startBlinkAnimation()):((n=l).classList.contains(r)||n.classList.contains(i)||n.classList.contains(o)||a(l,t),d.innerHTML="")},f.prototype.startBlinkAnimation=function(){var e=this.bubbleElement;return a(e,n),new Promise((function(t){e.addEventListener("animationend",(function(){c(e,n),t()}))}))},f.prototype.showSmall=function(){c(this.bubbleElement,t),a(this.bubbleElement,o)},f.prototype.resolveCustomIcon=function(e,n,o){var s;!function(e,n){n&&(a(e,r),c(e,t)),n||c(e,r)}(this.bubbleElement,n),s=this.bubbleElement,o&&!n?(a(s,i),c(s,t)):c(s,i),this.update(e)},f.prototype.getCount=function(){return this.val},f.prototype.hasReply=function(){return u(this.bubbleElement,r)},f.prototype.hasReaction=function(){return u(this.bubbleElement,i)},f.prototype.hasBubble=function(){return this.hasReply()||this.getCount()>0||this.hasReaction()},f.prototype.countMsg=function(){return this.isMsgCount},f.prototype.getElement=function(){return this.bubbleElement}})),define("OK/ToolbarDropdownEventBuses",["require","exports","OK/EventBus"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TOOLBAR_DROPDOWN_OPENED=e.TOOLBAR_DROPDOWN_OPEN=e.ToolbarDropdownEventBusesPrefix=void 0,e.ToolbarDropdownEventBusesPrefix="ui.toolbar-dropdown";var n=t.EventBus.factory(e.ToolbarDropdownEventBusesPrefix);e.TOOLBAR_DROPDOWN_OPEN=n("open"),e.TOOLBAR_DROPDOWN_OPENED=n("opened")})),define("OK/utils/windowScrolling",["require","exports","OK/utils/throttle"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onScrollStopped=e.onScrollStarted=e.onScroll=e.isScrolling=void 0;var n,r=[],i=[],o=[],s=!1,a=null,c=!1;function u(){c||(c=!0,window.addEventListener("scroll",d))}WeakMap&&(n=new WeakMap);var l=t(100,(function(e){for(var t=0,n=r.length;t<n;t++)r[t](e);a=setTimeout(h.bind(null,e),100)}));function d(e){clearTimeout(a),s||function(e){s=!0;for(var t=0,n=i.length;t<n;t++)i[t](e)}(e),l(e)}function h(e){s=!1;for(var t=0,n=o.length;t<n;t++)o[t](e)}function f(e,t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function p(e,t,r){return r.push(t),n&&n.set(t,e),f.bind(null,t,r)}e.isScrolling=function(){return u(),s},e.onScroll=function(e,t){return u(),p(e,t,r)},e.onScrollStarted=function(e,t){return u(),p(e,t,i)},e.onScrollStopped=function(e,t){return u(),p(e,t,o)}})),define("OK/utils/userActivity",["require","exports","OK/utils/throttle","OK/pms!userActivityConfig","OK/utils/environment"],(function(require,e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onActivityStop=e.onActivityStart=void 0;var i=n.config,o=(null==i?void 0:i.activityStartDelay)||5e3,s=(null==i?void 0:i.activityStartCancelDelay)||3e3,a=(null==i?void 0:i.activityStopDelay)||1e4,c=[],u=[],l=null,d=null,h=null,f=!1,p=Date.now(),m=p,g=!1;function v(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];r.isDebug&&i&&i.debug&&console.log.apply(console,["UserActivity:"].concat(e))}function _(){!g&&i&&(g=!0,p=Date.now(),m=p,document.addEventListener("mousemove",y),document.addEventListener("click",y),window.addEventListener("scroll",y))}var y=t(100,(function(e){clearTimeout(h),clearTimeout(d),h=setTimeout(E,a),f||(d=setTimeout(E,s)),null===l&&(l=setTimeout(O,o))}));function E(){if(clearTimeout(h),clearTimeout(l),clearTimeout(d),l=null,f){f=!1;var e=(m=Date.now())-p;v("stopActivity - activeTime",e);for(var t=0,n=c.length;t<n;t++)c[t](e)}}function O(){if(clearTimeout(h),clearTimeout(d),h=setTimeout(E,a),!f){f=!0;var e=(p=Date.now())-m;v("startActivity - idleTime",e);for(var t=0,n=u.length;t<n;t++)u[t](e)}}function T(e,t,n){return n.push(t),w.bind(null,t,n)}function w(e,t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}e.onActivityStart=function(e,t){return _(),T(0,t,u)},e.onActivityStop=function(e,t){return _(),T(0,t,c)}})),define("OK/ToolbarGrowl",["OK/ToolbarDropdownEventBuses","OK/logger","OK/utils/dom","OK/utils/windowScrolling","OK/utils/userActivity","OK/pms!toolbarGrowlConfig"],(function(e,t,n,r,i,o){"use strict";var s,a="__active",c="growl",u="click",l="data-id",d="toolbar-growl",h=function(){var e,n,r=document.createElement("bootstrap"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in i)if(i.hasOwnProperty(n)&&void 0!==r.style[n]){e=i[n];break}return t.success(c,"transition",e),e}(),f=null,p={},m=document.getElementById("msg_toolbar_button"),g=!(!m||!m.getAttribute("data-growl-add-log")),v=!!document.querySelector(".js-msg-ok"),_=!!document.querySelector(".js-msg-tt"),y=!1,E=0,O=0,T=0;try{const e=localStorage.getItem(d);s=e?JSON.parse(e):{}}catch(e){s=null}var w=o.config,L=o.userId;if(w&&w.hideIgnoredAfterUserActivity){var I="ToolbarGrowl";i.onActivityStart(I,(function(e){O=Date.now()})),i.onActivityStop(I,(function(e){E>O&&(e-=E-O),T+=e,f&&T>=w.hideIgnoredAfterUserActivity&&(f.clickClose(),T=0,x.showAny())}))}function b(e){const t=function(e){if(L&&s){const t=s[L]||{};if(t)return t[e]}return null}(e);return Boolean(t&&t.isViewed)}function A(e){return e&&parseInt(e.getAttribute("data-time"),10)||0}function S(){return!(OK.Layers&&OK.Layers.isAnyLayerOpened()||document.getElementById("CallApplication")||document.querySelector(".discovery-menu.with-search.__search-wide")||"appMain"===OK.getCurrentDesktopModelId()||this.isDisposedAfterViewed&&b(this.id))}function C(e){return n.firstByClass(e,"growl_close")}function P(){this.elem&&!this.hidden&&this.elem.classList.remove(a)}function k(){clearTimeout(this.showAfterScrollStoppedTimer),this.showAfterScrollStoppedTimer=setTimeout(N.bind(this),w.showAfterScrollDelay)}function N(){if(y)return y=!1,void x.showAny();this.elem&&!this.hidden&&this.elem.classList.add(a)}function x(e){this.hookId=e,this.hidden=!0,this.stash=null,this.markAsViewed=()=>{!function(e,t){if(L&&s){const n=s[L]||{};n[e]=Object.assign(n[e]||{},t),s[L]=n,localStorage.setItem(d,JSON.stringify(s))}}(this.id,{isViewed:!0})},this.destroyGrowl=()=>this.destroy()}return x.showAny=function(){var e,t;if(!f)if(w&&w.hideOnScroll&&r.isScrolling())y=!0;else for(e in p)if(p.hasOwnProperty(e)&&(t=p[e]).hidden&&(t.show(),!t.hidden))break},x.hideAll=function(){f&&f.hide()},x.destroyByLayerId=function(e){var t=p[e];t&&t.destroy()},x.getByLayerId=function(e){return p[e]},x.prototype={activate:function(e){if(this.hook=this.getContentHook(),this.layerId=e.getAttribute("data-layer"),this.exclusive="true"===e.getAttribute("data-exclusive"),this.isDropdownGrowl="true"===e.getAttribute("data-dropdown-growl"),this.isDisposedAfterViewed="true"===e.getAttribute("data-disposed-after-viewed"),this.priority=parseInt(e.getAttribute("data-priority"),10)||0,this.handleFocusOut=e=>{this.elem.contains(e.relatedTarget)||this.clickClose()},p[this.layerId]=this,this.hook&&(this.elem=this.hook.element.firstElementChild,this.elem&&(this.activateGrowl(),this.id=this.elem.getAttribute(l),this.time=A(this.elem))),w&&w.hideOnScroll){var t="ToolbarGrowl-"+this.layerId;this.onScrollStartedDestroy=r.onScrollStarted(t,P.bind(this)),this.onScrollStoppedDestroy=r.onScrollStopped(t,k.bind(this))}this.show()},deactivate:function(){this.onScrollStartedDestroy&&this.onScrollStartedDestroy(),this.onScrollStoppedDestroy&&this.onScrollStoppedDestroy()},clickClose:function(){var e=C(this.elem);e&&e.click&&e.click()},activateGrowl:function(){var t=C(this.elem);t&&t.addEventListener(u,this),this.isDropdownGrowl&&e.TOOLBAR_DROPDOWN_OPENED.on(this.destroyGrowl,this),this.isDisposedAfterViewed&&this.elem.addEventListener("click",this.markAsViewed,!0)},deactivateGrowl:function(){var t=C(this.elem);t&&t.removeEventListener(u,this,!0),this.isDropdownGrowl&&e.TOOLBAR_DROPDOWN_OPENED.off(this.destroyGrowl),this.isDisposedAfterViewed&&this.elem.removeEventListener("click",this.markAsViewed)},show:function(){if(this.id&&S.call(this)){if(f){if(this.priority<=f.priority)return;t.success(c,"replace",this.layerId),f.hide()}if(this.elem.addEventListener("focusout",this.handleFocusOut),this.elem.classList.add(a),this.hidden=!1,f!==this&&(T=0,E=Date.now()),f=this,t.success(c,"show","music_app"===this.layerId?this.layerId+"-"+this.id:this.layerId),"messages"===this.layerId&&g){var e=_?"tt":v?"ok":"unknown";return t.success("messagesLayer","growl",e)}}},hide:function(){this.elem&&(this.elem.removeEventListener("focusout",this.handleFocusOut),this.elem.classList.remove(a),this.hidden=!0,this===f&&(f=null))},destroy:function(){this.elem&&(this.deactivateGrowl(),this.hide(),this.id=null,this.time=null,this.elem=null)},setNewContent:function(e){var n,r,i=this,o=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children.length?t.children[0]:null}(e);if(OK.Layers&&OK.Layers.isLayerOpened(i.layerId))t.success(c,"ignore");else if(o){if(n=o.getAttribute(l),r=A(o),this.exclusive&&this.id&&this.id!==n)return;if(i.id===n&&i.time===r)return void t.success(c,"equal",1);i.hidden?this.setNewGrowl(e,n,r):(this.stash={html:e,id:n,time:r},this.elem.addEventListener(h,this,!1),i.destroy())}else i.destroy(),x.showAny()},applyNewContent:function(){this.hidden=!0,null===this.stash?OK.hookModel.setHookContent(this.getContentHookId(),""):(this.setNewGrowl(this.stash.html,this.stash.id,this.stash.time),t.success(c,"replace"),this.stash=null)},setNewGrowl:function(e,n,r){if(this.id!==n||this.time!==r){var i=this.getContentHook();OK.hookModel.setHookContent(i.id,e),this.elem=i.element.firstChild,this.id=n,this.time=r,this.activateGrowl(),setTimeout(this.show.bind(this),30)}else t.success(c,"equal",2)},handleEvent:function(e){var t=e.type;t===u?(this.time>this.crossTime&&(this.crossTime=this.time),this.destroy(),x.showAny()):t===h&&"opacity"===e.propertyName&&(e.target.removeEventListener(h,this),this.applyNewContent())},getContentHookId:function(){return this.hookId+"_Content"},getContentHook:function(){return this.hook||(this.hook=OK.hookModel.getHookById(this.getContentHookId())),this.hook}},x})),define("OK/css-loader",[],(function(){"use strict";function e(e,t,n){for(var r=document.getElementsByTagName("link"),i=0,o=r.length;i<o;i++)if(r[i].getAttribute("href")===e)return void(n&&n(r[i]));var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=e,n&&(s.addEventListener("load",(function(){n(e)})),s.addEventListener("error",(function(e){n.error(e)}))),(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}return{load:e,activate:function(t){var n=t.getAttribute("data-url");n&&e(n)}}})),define("OK/banners/StickyBannerContainer",["OK/utils/throttle"],(function(e){"use strict";var t,n=OK.topPanelHeight()+12,r={};function i(e){if(this.hookEl=e,e&&e.hasChildNodes()){var t=e.getElementsByClassName("banner-sticky-container");this.bannerContainer=t.length>0?t[0]:e.firstElementChild}this.currBannerContainerMinHeight=0,this.doReflow()}function o(){for(var e in r){if(r.hasOwnProperty(e))r[e].doReflow()}}return i.prototype.doReflow=function(){if(this.bannerContainer){var e=this.bannerContainer.clientHeight;if(this.currBannerContainerMinHeight!==e&&(this.hookEl.style.minHeight=e+"px",this.currBannerContainerMinHeight=e),this.hookEl.getBoundingClientRect().top<=n){var t=document.getElementById("footer").getBoundingClientRect();this.bannerContainer.style.position="fixed",e+n+12<t.top?(this.bannerContainer.style.top=n+"px",this.bannerContainer.style.bottom="auto"):(this.bannerContainer.style.top="auto",this.bannerContainer.style.bottom=document.documentElement.clientHeight-t.top+"px")}else this.bannerContainer.style.position="static"}},{activate:function(n){n&&n.id&&(r[n.id]=new i(n),t||(t=e(10,o),window.addEventListener("scroll",t,!1),window.addEventListener("resize",t,!1)))},deactivate:function(e){e&&e.id&&(delete r[e.id],0===Object.keys(r).length&&(window.removeEventListener("scroll",t,!1),window.removeEventListener("resize",t,!1),t=null))}}})),define("OK/banners/SmokescreenImgStyle",[],(function(){function e(e){this.bannerPlace=e,this.stylesheetEl=null,this.styleData=[]}return e.prototype={updateStylesheet:function(e){if(this.stylesheetEl){var t=this.stylesheetEl.sheet;if(t){for(var n=t.cssRules.length-1;n>=0;n--)t.deleteRule(0);var r="",i=this.styleData;for(n=0;n<i.length;n++){var o="b-img-"+this.bannerPlace+n,s=i[n].width,a=i[n].height;r="."+e.transform(o)+" {width: "+s+"px; height: "+a+"px; background-image: url('"+i[n].imgSrc+"');} ",t.insertRule(r,n)}this.styleData=[]}}},registerImageStyle:function(e,t,n){var r=this.styleData.length;return this.styleData.push({width:e,height:t,imgSrc:n}),r},createStyleEl:function(){var e=document.createElement("style");this.stylesheetEl=document.head.appendChild(e)}},e})),define("mrg-smokescreen/Utils",[],(function(){var e,t=!1;try{t="http://example.com/"===new URL("http://example.com/").href}catch(e){}function n(e,t){return Math.random()*(t-e+1)+e|0}var r=function(e){return Array.prototype.slice.call(e)};return{random:n,calcString:function(t,r){if(t=parseInt(t,10),function(){if(void 0===e)try{if("function"==typeof window.getComputedStyle){var t=document.createElement("div");t.style.height="calc(30px + 30px)",document.getElementsByTagName("body")[0].appendChild(t),e="60px"===window.getComputedStyle(t,null).getPropertyValue("height"),t.parentNode.removeChild(t)}}catch(t){e=!1}return e}()){for(var i=[],o=0,s=0,a=n(1,6);s<a;s++)i.push(n(-100,100)),o+=i[i.length-1];return o!==t&&i.push(t-o),"calc("+i.map((function(e){return e.toString()+r})).join(" + ")+")"}return t+r},replaceUrl:function(e,n,r){if(t&&n){var i,o=e.charAt(0),s='"'===o||"'"===o,a=0+s;i=r?e.indexOf((s?o:"")+")"):s?e.indexOf(o,a+1):e.length;var c=e.slice(a,i);try{c=new URL(c,n).href}catch(e){}return e.slice(0,a)+c+e.slice(i)}return e},replaceContent:function(e){var t=e.charAt(0),n='"'===t||"'"===t,r=Number(n),i=n?e.indexOf(t,r):e.indexOf(";",r),o=e.slice(r,i),s="";if(/^\\[a-z0-9]+$/.test(o)||!n)s=o;else for(var a=0;a<o.length;a++){var c=o[a].charCodeAt(0);isNaN(c)||(s+="\\"+c.toString(16))}return e.slice(0,r)+s+e.slice(i)},iterate:function(e,t,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"length"!==r&&t.call(n||this,e[r],r)},extend:function(){var e=r(arguments),t=e.shift();return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t},merge:function(){var e=r(arguments),t=e.shift();return e.forEach((function(e){for(var n in e)t[n]||(t[n]=e[n])})),t},toArray:r,isUrlConstructorExists:function(){return t}}})),define("mrg-smokescreen/StyleSheets.Item",["mrg-smokescreen/Utils"],(function(e){function t(e){e&&this.__rules.push(e)}function n(t,n){this.__style=function(t){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),(t=t||{}).rel="stylesheet",t.type="text/css",t.media=t.media||"screen",e.iterate(t,(function(e,t){e&&n.setAttribute(t,e)})),n}(t),this.__style.__created=!0,this.__rules=[],this.__originalNode=n}function r(){this.__rules.length&&this.__style.appendChild(document.createTextNode(this.__rules.join("\n")))}return n.prototype={constructor:n,insert:function(){t.apply(this,arguments)},insertBlock:function(e,n){t.apply(this,[e+"{"+n+"}"])},setContent:function(e){this.__style.appendChild(document.createTextNode(e))},apply:function(){var e,t,n,i;this.__originalNode&&this.__originalNode.parentNode?(e="id",t=this.__originalNode,n=this.__style,(i=t.getAttribute(e))&&n.setAttribute(e,i),this.__originalNode.parentNode.replaceChild(this.__style,this.__originalNode)):(function(){for(var e=document.styleSheets,t=e.length;t>0;t--){var n=e[t-1];if(n&&n.ownerNode&&n.ownerNode.parentNode)return n.ownerNode.parentNode}}()||document.head).appendChild(this.__style),r.apply(this)},getSheet:function(){return this.__style.sheet}},n})),define("mrg-smokescreen/StyleSheets.NativeParser",["mrg-smokescreen/Utils"],(function(e){var t=/content\s*:\s*/;function n(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}var r=/^(-?\d+)([a-z%]+)$/,i=/\s(?![*+\-/]|[^()]+\)+|\(+)/;function o(o,s,a,c){for(var u,l="",d=s(o.selectorText),h=["border","border-top","border-left","border-right","border-bottom","background"],f=0;f<o.style.length;f++)h.push(o.style[f]);return h.forEach((function(t){var s="important"===o.style.getPropertyPriority(t)?" !important":"";/background-(repeat|position)-[xy]/.test(t)&&(t=t.replace(/-[xy]$/,""));var a=o.style[t]||o.style[n(t)];if(void 0!==a&&a.length||(t=t.replace(/-(value|(ltr|rtl)-source)$/g,""),a=o.style[t]||o.style[n(t)]),void 0===a&&"float"===t&&(a=o.style.cssFloat),void 0!==a&&a.length){if(c.randomize&&c.randomize.length&&c.randomize.indexOf(t)>-1&&d!=o.selectorText){for(var u=a.split(i),h=u.length,f=[];h--;){var p=r.exec(u[h]);f.unshift(p?e.calcString(p[1],p[2]):u[h])}a=f.join(" ")}l+=t+": "+a+s+"; "}})),-1!==l.indexOf("url(")&&(l=function(t,n){var r=!0;return t.split("url(").map((function(t){return r?(r=!1,t):e.replaceUrl(t,n,!0)})).join("url(")}(l,a)),-1!==l.indexOf("content")&&(u=!0,l=l.split(t).map((function(t){return u?(u=!1,t):e.replaceContent(t)})).join("content:")),d+" { "+l+" }"}return{iterate:function(t,n,r,i,s){s=s||{},e.iterate(function(e){try{return e.cssRules||e.rules}catch(e){return null}}(t),(function(t){switch(t.type){case 1:i(o(t,n,r,s));break;case 4:var a=[];e.iterate(t.cssRules||t.rules,(function(e){a.push(o(e,n,r,s))})),i("@media "+t.media.mediaText+" { "+a.join(" ")+" }");break;default:i(t.cssText)}}))}}})),define("mrg-nano-xhr",[],(function(){var e=new Function;return{version:"0.0.15",request:function(t,n){var r=t,i="GET",o=null,s=!1,a=!1,c=function(){var t={readyState:4,status:-1};t.open=t.send=e;try{t=new window.XMLHttpRequest}catch(e){try{t=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}return t}(),u=null,l=new Date,d={error:u,xhr:c};"object"==typeof t&&(r=t.url,i=t.method||i,o=t.body||o,s=t.sync||s,a=t.credentials||a),c.withCredentials=a,c.url=r;var h=function(){(u||4===c.readyState)&&(h=e,d.error=u,c.duration=new Date-l,c.onerror=c.onreadystatechange=null,"function"==typeof n&&n(u,c))};try{c.onreadystatechange=h,c.onerror=function(e){u=e,h()},c.open(i,r,!s),c.send(o)}catch(e){u=e,h()}return d}}})),define("mrg-smokescreen/StyleSheets",["mrg-smokescreen/StyleSheets.Item","mrg-smokescreen/StyleSheets.NativeParser","mrg-smokescreen/Utils","mrg-nano-xhr"],(function(e,t,n,r){var i=/(^(https?:)?\/\/[^/]+|\?timestamp=\d+$)/g;function o(e){return e.replace(i,"")}function s(e,t){var n=e(t);return(n!==t?n+",":"")+t}function a(e){var t;return e.ownerNode&&(t=o((t=e.ownerNode.href||e.ownerNode.getAttribute("x-href"))||"")),t}var c={};return{update:function(u,l,d){return new Promise((function(h,f){!function(e,t){var r=e.map((function(e){return o(e)}));!function e(){n.iterate(document.styleSheets,(function(e){if("LINK"===e.ownerNode.tagName){var t=a(e).replace(i,"");r=r.filter((function(e){return t!==e}))}})),r.length?setTimeout(e,100):t()}()}(u,(function(){var n=[].map.call(document.styleSheets,(function(e){return e}));!function(e,t,n){Object.keys(c).length===e.length&&t(),e.forEach((function(i){r.request({url:i,sync:!1},(function(r,s){r&&n(r),4===s.readyState&&(c[o(i)]=s.responseText,Object.keys(c).length===e.length&&t())}))}))}(u,(function(){n.forEach((function(n){if(n.ownerNode&&!n.ownerNode.__created&&!n.__updated&&"LINK"===n.ownerNode.tagName){var r=n;n.__updated=!0;var i=a(n);if(i)try{var o=c[i];if(o){var u;try{u=n.media?n.media.mediaText:""}catch(e){u=""}var h=new e({"x-href":i,media:u},n.ownerNode);h.setContent(o),h.apply(),(r=h.getSheet()).__updated=!0;var p=new e({"x-href":i,media:u},r.ownerNode);p.__updated=!0,t.iterate(r,s.bind(null,l),i,(function(e){p.insert(e.toString())}),d),p.apply()}}catch(e){f(e)}}})),h()}),(function(e){f(e)}))}))}))},remove:function(e){if((e=(e||[]).map((function(e){return(e||"").replace(/^https:/,"")}))).length){var t=[];n.iterate(document.styleSheets,(function(n){var r=a(n);r&&-1!==e.indexOf(r)&&t.push(n)}));for(var r=t.length-1;r>=0;r--){var i=t[r];i.ownerNode.parentNode.removeChild(i.ownerNode)}}},insert:function(t,r){var i=new e({}),o=s.bind(null,r),a=function(e,t){return o(e)+function(e){var t=[];return n.iterate(e,(function(e,n){t.push(n+":"+e+";")})),"{"+t.join("\n")+"}"}(t)};n.iterate(t,(function(e,t){if(/@(media|supports|document|page|keyframes|font-feature-values)/.test(t)){var r=[];n.iterate(e,(function(e,t){r.push(a(t,e))})),i.insertBlock(t,r.join(""))}else i.insert(a(t,e))})),i.apply()}}})),define("mrg-smokescreen/Cid",[],(function(){var e=1e3,t=function(e){for(var t=0;t<10;t++)e.push(t.toString());for(t=0;t<25;t++)e.push(String.fromCharCode(97+t)),e.push(String.fromCharCode(65+t));return function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}(e)}([]),n=t.length;function r(e){return(e>=n?r((e/n>>0)-1):"")+t[e%n>>0]}var i=function(){for(var e=[],n=0;e.length<5&&n<t.length;n++)(e.length>0||!/[0-9]/.test(t[n]))&&e.push(t[n]);return e.join("")}();return function(){return i+r(e++)}})),define("mrg-smokescreen/Welter",["mrg-smokescreen/Cid","mrg-smokescreen/Utils"],(function(e,t){"use strict";var n={};function r(){var t=e(!0);return n[t]=!0,t}function i(e,n){for(var o=document.createDocumentFragment(),s=0,a=t.random(e/2,e);s<a;s++){var c=document.createElement("div");t.random(0,n)&&c.appendChild(i(e,n-1));var u=0;t.random(0,e)%2||(c.id=r(),u++),t.random(0,e)%5||(c.setAttribute("data-bem",r()),u++),t.random(0,e)%6||(c.setAttribute("data-mnemo",r()),u++),t.random(0,e)%3&&u||(c.className=r()),o.appendChild(c)}return o}return{isWelter:function(e){return void 0!==n[e]},wrap:function(e,n){function r(e){e&&t.toArray(e.querySelectorAll(n)).forEach((function(e){if(!e.classList.contains("js-welter-no-wrap")){var n=i(5,5),r=n.querySelectorAll("div"),o=r[t.random(0,r.length-1)];e&&o&&(e.originalParentNode=e.parentNode,e.parentNode.insertBefore(n,e),o.appendChild(e))}}))}try{e.nodeType?r(e):e.length>=0?1===e.length?r(e[0]):t.toArray(e).forEach(r):console.warn('[Walter.wrap] this "context" not supported:',e)}catch(e){console.error(e)}}}})),define("mrg-smokescreen/Locator",["mrg-smokescreen/StyleSheets","mrg-smokescreen/Welter","mrg-smokescreen/Utils","mrg-smokescreen/Cid"],(function(e,t,n,r){"use strict";var i,o,s,a,c=r(),u=0,l={names:{},reverse:{},wraps:{}},d={},h=!1,f=[],p=/([@#:.]*)([\w$-]+)/gi,m=[],g={},v=(o=["top","right","bottom","left"],a=["height","width","max-width","max-height","min-height","min-width"],(s=["margin","padding"]).forEach((function(e){o.forEach((function(t){a.push(e+"-"+t)}))})),a.concat(o,s));function _(e){E(e)}function y(t){t&&m.push(t),m.forEach((function(t){e.insert(t,I)})),m=[]}function E(e,t){e=n.extend({},g,e||{}),g=e,e.enable&&(h=!0),h&&e.match&&e.match instanceof Array&&e.match.length>0&&(f=f.concat(e.match),i=new RegExp("^("+f.join("|")+")")),e.randomize&&(e.randomize=!0===e.randomize?v:e.randomize),e.sheet&&y(e.sheet)}function O(e,t){return(t?t+"@@@":"")+e}function T(e,t){var n=O(e,t),o=l.names[n];return!o&&h&&i&&i.test(t||e)&&(o=r(),l.names[n]=o,l.reverse[o]=e),o||e}function w(e,t){var n=L(e);return t?T(n.elem,t)+(n.mod?"_"+T(n.mod,t):""):T(n.elem)+(n.mod?"_"+T(n.mod,n.elem):"")}function L(e){var t,n=(e?""+e:"").match(/^(.*?[^_])(_([^_]+))?$/);return n&&(e=n[1],t=n[3]),{elem:e,mod:t}}function I(e){return e.replace(p,(function(e,t,n){return!t||/:/.test(t)?e:t+w(n)}))}function b(e,t){var n=L(e);return t?(l.names[O(n.elem,t)]||n.elem)+(n.mod?"_"+(l.names[O(n.mod,t)]||n.mod):""):(l.names[n.elem]||n.elem)+(n.mod?"_"+(l.names[O(n.mod,n.elem)]||n.mod):"")}function A(e,t,n){return(e||"").toString().split(/\s+/).map((function(e){return t(e,n)})).join(" ")}function S(e){var t=L(e);return(l.reverse[t.elem]||t.elem)+(t.mod?"_"+(l.reverse[t.mod]||t.mod):"")}return _.prototype={constructor:_,setup:E,selector:function(e,t){var n=I(e);return t||e==n?n:n+", "+e},transform:function(e,t){return A(e,w,t)},lookup:function(e,t){return A(e,b,t)},updateSheets:function(t){if(h&&t)return e.update(t,I,g)},removeSheets:function(t){h&&t&&e.remove(t)},insertSheet:y,reverse:function(e){return A(e,S)},isWelter:function(e){return t.isWelter(e)},wrap:function(e,n){if(h){var r;(n=n||document)[c]?r=n[c]:(r=++u,n[c]=r);var i=d[r];null==i&&(i={}),e.forEach((function(e){if(!i[e]){var o=I(e);i[e]=o,d[r]=i,t.wrap(n,o)}}))}},calcString:function(e,t){return h?n.calcString(e,t):e+t},removeCache:function(e){delete d[e[c]],delete e[c]},isEnabled:function(){return h}},_})),define("OK/Smokescreen",["mrg-smokescreen/Locator"],(function(e){"use strict";var t=null;return{getLocator:function(n){return t||(t=new e({enable:!0,randomize:n||!1,match:[".*"]}))},getById:function(e){var n=document.getElementById(e);return!n&&t&&(n=document.getElementById(t.transform(e))),n||null}}})),define("mrg-smokescreen/Honeypot",["OK/logger"],(function(e){function t(e){for(var t,n=[],r=[];t=e.pop();){var i=document.createElement(t.tag||"div");for(var o in t.attrs||(t.attrs={}),t.id&&(t.attrs.id=t.id),t.classes&&(t.attrs.class=t.classes.join(" ")),t.attrs)t.attrs.hasOwnProperty(o)&&"length"!==o&&i.setAttribute(o,t.attrs[o]);r.forEach((function(e){i.appendChild(e)})),r=[],n.push(i),r.push(i);for(o=1;o<t.multi;o++){var s=i.cloneNode(!0);n.push(s),r.push(s)}}return{baits:n,nodes:r}}function n(e,t){t.available&&t.styles.forEach((function(t){e.style[t.field]=t.value}))}return{version:"1.3.0",check:function(r,i,o){var s,a,c,u,l,d,h,f,p,m=document.getElementsByTagName("body")[0];if(m){try{var g=(a=r,c=/^([a-z][a-z0-9]*)/g,u=/^\.([A-z0-9\-\_]+)/g,l=/^#([A-z0-9\-\_]+)/g,d=/^@([A-z0-9\-\_]+)="((?:[^"\\]|\\.)*)"/g,h=/^\*(\d+)/g,f=new RegExp('"',"g"),p=/\s+/,a.map((function(e){var t=e.split(p),n=(e.match(f)||[]).length;if(n>0&&n%2==0)for(var r=null,i=0;i<t.length;i++)if(null===r){var o=(t[i].match(f)||[]).length;o&&o%2&&(r=i)}else t[r]+=" "+t[i],-1!==t[i].indexOf('"')&&(r=null),t[i]=void 0;return t.filter((function(e){return e})).map((function(e){if(e){var t,n={multi:1};do{c.lastIndex=0,u.lastIndex=0,l.lastIndex=0,d.lastIndex=0,h.lastIndex=0,(t=c.exec(e))?(e=e.substr(c.lastIndex),n.tag=t[1]):(t=u.exec(e))?(e=e.substr(u.lastIndex),n.classes=n.classes||[],n.classes.push(t[1])):(t=l.exec(e))?(e=e.substr(l.lastIndex),n.id=t[1]):(t=d.exec(e))?(e=e.substr(d.lastIndex),n.attrs=n.attrs||{},n.attrs[t[1]]=t[2].replace(/\\/g,"")):(t=h.exec(e))&&(e=e.substr(h.lastIndex),n.multi=parseInt(t[1]))}while(t&&e.length);if(e.length)throw new Error('Unparsed template: "'+e+'"');return n}}))}))),v=(s=i,{available:"function"==typeof window.getComputedStyle,styles:(s||[]).map((function(e){var t=e.split(/\s*:\s*/);return{field:t[0],value:t[1]}}))});if(function(e){if((e||"").length)try{var t=new RegExp(e);return Object.keys(window).filter((function(e){return e.match(t)})).length>0}catch(e){}}(o))return!0;for(var _=[],y=[],E=0;E<g.length;E++)if(g[E]&&g[E].length){var O=t(g[E]);if(O.nodes&&O.baits&&O.baits.length){var T=document.createElement("div");T.style.position="absolute",T.style.visibility="hidden",T.style.top="0",T.style.left="0",O.nodes.forEach((function(e){T.appendChild(e)})),m.appendChild(T),O.baits.forEach((function(e){n(e,v)})),_=_.concat(O.baits),y.push(T)}}return new Promise((function(e){window.setTimeout((function(){var t=!1;_.forEach((function(e){(function(e){return null===e.offsetParent}(e)||function(e,t){var n;if(t.available){var r=window.getComputedStyle(e,null);t.styles.forEach((function(e){n||(n=r[e.field]!==e.value&&"auto"!==r[e.field])}))}return n}(e,v))&&(t=!0)})),y.forEach((function(e){m.removeChild(e)})),e(!0===t)}),100)}))}catch(t){e.success("nb_error","honeypot",t)}return!1}}}})),define("OK/banners/blockDetect/honeypotBlockDetect",["mrg-smokescreen/Honeypot"],(function(e){return function(t){if(!(t.honeypotEnabled||!1))return Promise.resolve(!1);var n=t.honeypotRules||[".dialogWrapperBanner"],r=t.honeypotCssRules||["position: relative"],i=t.honeypotJsConfig||null;return e.check(n,r,i)}})),define("OK/banners/blockDetect/networkBlockDetect",[],(function(){var e,t;return function(){return new Promise((function(n){function r(){n(!0)}window.mailruEnabled=function(){n(!1)},(e=document.createElement("script")).type="text/javascript",e.src="//ad.mail.ru/adq/?callback=mailruEnabled&"+Date.now(),e.onerror=r,document.head.appendChild(e),t=setTimeout(r,4e3)})).then((function(n){return document.head.removeChild(e),window.mailruEnabled=null,e=null,clearTimeout(t),n}))}})),define("OK/wld",["require","exports","OK/cookie","OK/logger"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detect=void 0;var r="abp-wl";function i(e){return new Promise((function(t,i){var o=document.createElement("script");o.src="https://limg.imgsmail.ru/informers/abp/px.js?ch="+e,o.onload=function(){t(),n.success(r,"ch-"+e+".load")},o.onerror=function(){i(),n.success(r,"ch-"+e+".error")},document.head.appendChild(o)}))}window.abp=window.abp||!1;var o=new Promise((function(e,t){setTimeout(t,4e3);var n=!1;i(1).catch((function(e){throw n=!0,e})).then((function(){return i(2)})).then(t,(function(){n||!window.abp?t():e()}))}));o.then((function(){(0,t.setCookie)("abw","1",30,"/"),n.success(r,"yes")}),(function(){(0,t.clearCookie)("abw","/"),n.success(r,"no")})),e.detect=function(){return o}})),define("OK/banners/blockDetect/blockDetect",["OK/logger","OK/cookie","OK/banners/blockDetect/honeypotBlockDetect","OK/banners/blockDetect/networkBlockDetect","OK/wld"],(function(e,t,n,r,i){function o(t){e.success("nb_success","detect",t)}return function(s){return document.documentElement.classList.contains("ie")?Promise.resolve(!1):new Promise((function(a){var c,u,l,d=r(s),h=n(s),f=i.detect(),p=3;function m(){return l||u}function g(){if(0==--p){var n=m()&&!c;a(n),n?(l&&u?o("all"):(u&&o("network"),l&&o("honeypot")),t.setCookie("nbp","1",15,"/")):(e.success("nb_success","not_detect",c?"whitelist":""),t.clearCookie("nbp","/"))}}function v(e){return e&&!1===c&&a(!0),e}function _(){return e.success("nb_error","detect","catch"),!1}d.then(v,_).then((function(e){u=e,g()})),h.then(v,_).then((function(e){l=e,g()})),f.then((function(){return a(!1),!0}),(function(){return m()&&a(!0),!1})).then((function(e){c=e,g()}))}))}})),define("OK/ViewportTracker",["OK/utils/throttle","OK/utils/dom"],(function(e,t){"use strict";var n="js-viewport-container",r=[],i=!1,o=e(100,(function(){r.forEach((function(e){e.calculate()}))}));function s(e){var t=null;return r.some((function(n){if(n.element===e)return t=n,!0})),t}function a(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function c(e,t,n,r){this.element=e,this.container=t,this.callback=n,this.predicate=r?r.bind(this):null}function u(t){this.element=t,this.items=[],this.listener=e(100,this.calculate.bind(this)),this.element.addEventListener("scroll",this.listener),this.updateRect()}return c.prototype={destroy:function(){this.container=null},isInViewport:function(){var e,t=this.container.rect,n=t.top,r=t.bottom;try{e=this.element.getBoundingClientRect()}catch(t){e={top:0,right:0,bottom:0,left:0,width:0,height:0}}return e.top>=n&&e.top<=r||e.bottom>=n&&e.bottom<=r},calculate:function(){var e=this.predicate?this.predicate():this.isInViewport();this.visible!==e&&(this.visible=e,this.callback.call(this.element,e))}},u.prototype={add:function(e){this.items.push(e),this.updateRect(),e.calculate()},updateRect:function(){this.rect=this.element.getBoundingClientRect()},remove:function(e){var t=null;this.items.forEach((function(n){if(n.element===e)return t=n,!0})),t&&(t.destroy(),a(this.items,t))},isEmpty:function(){return 0===this.items.length},isLast:function(e){return this.items[this.items.length-1]===e},calculate:function(){this.updateRect(),this.items.forEach((function(e){e.calculate()}))},destroy:function(){this.element.removeEventListener("scroll",this.listener)}},{add:function(e,a,l){var d,h=t.parent(e,n);null===h&&(h=window),(d=s(h))||(d=new u(h),r.push(d)),d.add(new c(e,d,a,l)),i||(window.addEventListener("resize",o),i=!0)},remove:function(e){var c,u=t.parent(e,n);null===u&&(u=window),(c=s(u))&&(c.remove(e),c.isEmpty()&&(c.destroy(),a(r,c))),i&&0===r.length&&(window.removeEventListener("resize",o),i=!1)},getContainer:function(e){return s(t.parent(e,n))}}})),define("OK/banners/moneySaveV1",["OK/utils/dom","OK/logger","OK/utils/vanilla","OK/utils/utils","OK/banners/StickyBannerContainer","OK/Smokescreen","mrg-smokescreen/Welter","mrg-smokescreen/Utils","OK/banners/blockDetect/blockDetect","OK/banners/SmokescreenImgStyle","OK/ViewportTracker"],(function(e,t,n,r,i,o,s,a,c,u,l){var d,h,f,p,m,g,v="nb_success",_="nb_error",y="hook_ViewportHeightAwareBanner_ViewportHeightAwareBannerInner",E="LeftColumnBannerInner",O="wss://ad.mail.ru/mimic/v1/ws",T=!1,w=!0,L=!0,I=!0,b=!0,A=!1,S=!1,C=!1,P={topRight:"",message:"",discussion:"",bottomLeft:""},k={topRight:"",message:"",discussion:"",bottomLeft:""},N={topRight:3,message:3,discussion:3,bottomLeft:5},x="",R=!1,D={topRight:-1,message:-1,discussion:-1,bottomLeft:-1},K="",M="",H="",B=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,F=(e.byClass,e.firstByClass),U=new Promise((function(e){f=e})),G=new Promise((function(e){p=e})),j=!1,Y=!1;var q,X={bottomLeft:new u("bottomLeft"),topRight:new u("topRight")},W={leftAdCont:"mainContentLeftColumn",leftAdWrapper:"leftColumn",hookBlockMainContent:"hook_Block_MainContent"},V={leftAdCont:"hook_Block_AsideColumn",leftAdWrapper:"hook_Block_AsideColumn",hookBlockMainContent:"hook_Block_MainContent2"},z=W;function J(){if(j){var e=document.getElementById("hook_Block_MainContent2");z=e?V:W}}function $(e){var t=e.children;e.removeAttribute("style");for(var n=t.length,r=0;r<n;r++){var i=t[r];i.classList.contains("delete-stub")||"DIV"===i.tagName&&$(i)}}function Q(e,n){var r=e+"Smokescreen";try{q().then(n).catch((function(e){t.success(_,r,e)}))}catch(e){t.success(_,r,e)}}function Z(e,t,n,r){if(S&&"bottomLeft"===n){if(e.narrow){var i=document.getElementById("hook_Block_ViewportHeightAwareBanner");i&&i.classList.add("__narrow")}Q(n,(function(){var t=document.getElementById(z.leftAdWrapper);if(t){var i=document.getElementById("hook_Block_StickyBannerContainer");if(i){!function(){var e=document.getElementById("mainContent"),t=document.getElementById("hook_Block_StickyBannerContainer"),n=document.querySelector(".layout-aside");e&&t?(e.classList.contains("narrow-feed")&&t.classList.add("narrow-feed"),e.classList.contains("profile-v2")&&t.classList.add("profile-v2"),e.classList.contains("wide-profile")&&t.classList.add("wide-profile"),e.classList.contains("mainContentDoubleColumn")&&t.classList.add("mainContentDoubleColumn")):!e&&t&&t.classList.add("layout-container");n&&t&&t.classList.add("layout-aside")}(),de(i,["#hook_Block_CompactFooter"]),h.wrap(["#hook_Block_StickyBannerContainer"],t),s.wrap(t,"#"+z.leftAdWrapper+' > [id^="hook_Block"]');var o=fe("stickyBannerHook");o&&o.applySmokescreen(h)}else de(e,["#hook_Block_CompactFooter"],!0);X.bottomLeft.updateStylesheet(h),r(),function(e,t){var n=e.parentNode;if(!n)return;var r=e.cloneNode(!0);le(r,t),n.replaceChild(r,e)}(e,n)}}))}else"topRight"===n&&A?Q(n,(function(){de(e,!1,!0),le(e,n),X.topRight.updateStylesheet(h),r()})):r()}q=function(){return U.then((function(){h=C?o.getLocator(["width"]):o.getLocator(),S&&X.bottomLeft.createStyleEl(),w&&X.topRight.createStyleEl();var e=h.updateSheets(d);return q=function(){return e},e}))};var ee="__expanded";function te(e,t){this.el=e,this.onClick=this.onClick.bind(this),this.el.addEventListener("click",this.onClick)}function ne(e,t){this.el=e;var n=e.getAttribute("data-nbh");n&&(this.onClick=ke.bind(e,n,t),this.el.addEventListener("click",this.onClick)),this.el.removeAttribute("data-nbh")}function re(e,t){this.el=e,this.bannerPlace=t,this.options=JSON.parse(e.getAttribute("data-options")),this.onClick=this.onClick.bind(this),this.el.addEventListener("click",this.onClick),this.el.removeAttribute("data-options")}function ie(e,t){this.el=e,this.options=JSON.parse(this.el.getAttribute("data-options")),this.pixels=this.options.common,this.pixels.render_block_pixel&&Te(this.pixels.render_block_pixel),this.pixels.block_pixel&&(this.checkVisibility=this.checkVisibility.bind(this),this.onVisible=this.onVisible.bind(this),l.add(this.el,this.onVisible,this.checkVisibility)),this.el.removeAttribute("data-options")}te.prototype.onClick=function(e){this.el.classList.toggle(h.transform(ee))},te.prototype.destroy=function(){this.el.removeEventListener("click",this.onClick)},ne.prototype.destroy=function(){this.onClick&&this.el.removeEventListener("click",this.onClick)},re.prototype.onClick=function(t){var n=this.options;n.clickLink&&ke(n.clickLink,this.bannerPlace,t),n.url&&Te(n.url);var r=e.parent(t.target,h.transform("b-context__close"));if(r&&r.classList.remove(h.transform(ee)),n.shouldCloseAd){var i=e.parent(t.target,h.transform("b-js_ad"));i&&i.classList.add("invisible")}t.stopPropagation(),t.preventDefault()},re.prototype.destroy=function(){this.el.removeEventListener("click",this.onClick)},ie.prototype.checkVisibility=function(){return!!ue(this.el)&&r.isElementInViewport(this.el)},ie.prototype.onVisible=function(e){e&&this.pixels.block_pixel&&(l.remove(this.el),Te(this.pixels.block_pixel))},ie.prototype.destroy=function(){this.pixels.block_pixel&&l.remove(this.el)};var oe,se,ae={ad:ie,link:ne,close:te,closeLink:re},ce=[];function ue(e){return!!e.closest("body")}function le(e,t){for(var n=e.getElementsByClassName(h.transform("b-js__hook")),r=0;r<n.length;r++){var i=n[r].getAttribute("data-msh");null!=i&&ae.hasOwnProperty(i)&&ce.push(new ae[i](n[r],t)),n[r].removeAttribute("data-msh")}}function de(e,t,n){if(t)for(var r=0;r<t.length;++r)if(e.matches(t[r]))return;n||function(e){e.id&&(e.id=h.transform(e.id));e.className?e.className=h.transform(e.className):e.removeAttribute("class");var t={};["data-module","data-place","data-name","data-params","data-dependencies","data-fallback","jsplace"].forEach((function(n){e.hasAttribute(n)&&(t[n]=e.getAttribute(n),e.removeAttribute(n))})),(t.hasOwnProperty("jsplace")||""===e.getAttribute("style"))&&e.removeAttribute("style");e.okData=t}(e);for(var i=e.children,o=i.length,s=0;s<o;s++)de(i[s],t)}function he(e,t){var n=F(e,t);return n||(h?F(e,h.transform(t)):null)}function fe(e){var t=he(document,e);return t?t.nativeHookImpl:null}function pe(e){if(e&&F(e,"js-banner-wrapper")){var t=F(e,"feed_close");t&&t.addEventListener("click",(function(){$(e)}))}}function me(){var e=F(document,"feed-list");if(e){for(var t=e.children,n=t.length,r=0;r<n;r++)pe(t[r]);if(B){new B((function(e){e.forEach((function(e){var t=e.addedNodes[0];t&&t instanceof Element&&pe(F(t,"feed"))}))})).observe(e,{attributes:!1,childList:!0,characterData:!1})}}}function ge(){return oe||(oe=new Promise((function(e){se=e}))),oe}function ve(t){J();var n=document.getElementById(z.hookBlockMainContent);n&&(B&&new B((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.length>0&&me()}))})).observe(n,{childList:!0}));me(),Promise.all([G,ge()]).then((function(t){var n,r;t[1]&&(function(){if(!b)return;J();var t=function(){return document.getElementById(y)||document.getElementById(E)||document.querySelector("#hook_Block_ViewportHeightAwareBanner .banner_new__vha")},n=document.getElementById(z.leftAdCont),r=t();if(!r||!n)return;var o=!1;if(r.id===E){var s=he(r,"banner-controller");s&&(o="true"===s.getAttribute("data-sticky-banner"))}var a=function(t,n){ye(t,n,"bottomLeft",(function(){for(var n=he(t,"b-context"),r=n.children.length,s=0,a=0,c=0;c<r;++c){var u=n.children[c];(s+=u.offsetHeight)>.65*window.innerHeight?u.classList.add(h.transform("b-invisible")):a++}if(t.id===E){if(o){var l=e.parent(t,"hookBlock");l&&i.activate(l),o=!1}}else{var d=fe("stickyBannerHook");d&&d.doReflow()}return a}))},c=function(){var e=t(),n=document.getElementById(z.leftAdCont);e&&n&&a(e,n)};if(B){var u=new B((function(e){var t=!1;e.forEach((function(e){if(!t){e.attributeName;"childList"===e.type&&e.addedNodes.length>0&&(c(),t=!0)}}))})),l=document.getElementById(z.hookBlockMainContent);u.observe(l,{childList:!0});var d=new B((function(e){var t=!1;e.forEach((function(e){if(!t&&"childList"===e.type&&e.addedNodes.length>0){J();var n=document.getElementById(z.hookBlockMainContent);n&&(u.observe(n,{childList:!0}),c(),t=!0)}}))})),f=document.getElementById("hook_Block_MainContentWrapper");f&&d.observe(f,{childList:!0})}a(r,n)}(),n=document.getElementById("hook_ToolbarIconDiscussions_ToolbarDiscussions"),r=new B((function(e){e.forEach((function(e){if("class"===e.attributeName){if(!OK.util.is4ColumnActive())return;if(e.target.classList.contains("toolbar_nav_a__discu__active")){var t=F(document,"topPanel_d");if(t){var n=F(t,"dialogWrapperBanner"),r=n?F(n,"dialogWrapperBanner__inner"):null;r&&""===r.innerHTML&&ye(r,n,"discussion")}}}}))})),I&&n&&r.observe(n,{attributes:!0}),function(){var e=document.getElementById("msg_layer_wrapper"),t=document.getElementById("hook_Block_MessagesLayer");if(!L||!t||!e)return;var n=function(e){var t=document.getElementById("hook_Block_MessagesAdsPanel"),n=document.getElementById("hook_BannerNew_MessagesAdsPanelInner")||document.getElementById("MessagesAdsPanelInner");t&&n&&(e?OK.util.is4ColumnActive()&&ye(n,t,"message"):t.setAttribute("style","display: none !important"))},r=new B((function(e){n(!0),r.disconnect()}));r.observe(t,{childList:!0}),new B((function(e){e.forEach((function(e){"class"===e.attributeName&&n(!e.target.classList.contains("invisible"))}))})).observe(e,{attributes:!0})}())})),c(t).then((function(e){se(e)}))}function _e(e,t,n){n();var r=D[e];R&&r>0&&window.setTimeout((function(){document.body.contains(t)&&t.offsetParent&&_e(e,t,n)}),1e3*r)}function ye(e,n,r,i){return function(){for(var e=ce.length-1;e>=0;e--){var t=ce[e];ue(t.el)||(t.destroy(),ce.splice(e,1))}}(),new Promise((function(n){_e(r,e,(function(){var o=new Oe;function s(){o.cleanup()}o.getAds(r).then((function(a){var c="topRight"===r&&A||"bottomLeft"===r&&S,u="bottomLeft"===r&&e.classList.contains("__narrow");e.narrow=u;var l=function(e,n,r,i,o){if(!(n&&n.body&&n.body.direct&&n.body.direct.ads))return void t.success(_,"badDirectBlock");var s="",a=n.body.direct.ads,c=0;if(0===a.length)return t.success(_,"emptyAds"),0;for(var u=0;u<a.length&&!(u>=r);++u){var l=a[u];l&&(s+=Pe(l,o,i,e.narrow),c++)}if(s&&e){var d=n.body.common?{common:n.body.common}:{common:{}};e.innerHTML=be('<div class="b-context b-js__hook" data-msh="ad" data-options="'+Ie(JSON.stringify(d))+'">',s,"</div>")}return c}(e,a.result,N[r],r,c);Z(e,0,r,(function(){if(i){var c=i(e);c>=0&&(l=c)}if(t.success(v,"showDirectAd",l),l>0){d=a.id,h=k[r],(new Image).src="//rs.mail.ru/d"+h+".gif?rnd="+d+"&ts="+Date.now();var u=function(e,t){for(var n=e.body.direct.ads,r=e.body.common.link_head.replace(/^.+\/count\//,""),i=0;i<t;++i)r+=n[i].link_tail;return r}(a.result,l);o.sendCount(r,u).then(s,s)}else s();var d,h;n()}))}))}))}))}function Ee(e,n){return new Promise((function(r,i){var o;try{o=JSON.parse(n)}catch(e){return t.success(_,"parseError"),void i()}return o&&o.error?(t.success(_,e+".respError",o.error),void i()):o&&o.result&&o.id?200!==o.result.status?(t.success(_,e+".badStatus",o.result.status),void i()):void r(o):(t.success(_,e+".badPayload"),void i())}))}function Oe(){Object.defineProperty(this,"getAds",{value:function(e){var r="cmd="+M+"&gwt.requested="+window.pageCtx.gwtHash+"&mt=page&pl="+window.encodeURIComponent(e);return n.ajax({url:"/dk",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return Ee("page",e.response)}),(function(e){t.success(_,"xhrErr",e.status)}))}}),this.sendCount=function(e,t){var r="cmd="+M+"&gwt.requested="+window.pageCtx.gwtHash+"&mt=count&pl="+e+"&cnt="+window.encodeURIComponent(t);return n.ajax({url:"/dk",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return Ee("count",e.response)}))},this.cleanup=function(){}}function Te(e){if(Y){var t="cmd="+M+"&gwt.requested="+window.pageCtx.gwtHash+"&mt=pixel&u="+window.encodeURIComponent(e);return n.ajax({url:"/dk",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}(new Image).src=e}var we,Le,Ie=(we={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;"},Le=!1?/[&<>"']/g:/&(?!#?\w+;)|<|>|"|'/g,function(e){return e?e.toString().replace(Le,(function(e){return we[e]||e})):""});function be(){return Array.prototype.slice.call(arguments).join("")}function Ae(e,t){return e?t:""}function Se(e,t){return be('<span class="ads_char'+(t?" __fake":"")+'">',Ie(e),"</span>")}function Ce(e){for(var t=[],n=0;n<e.length;n++)t.push(Se(e[n])),t.push(Se(String.fromCharCode(97+Math.round(30*Math.random())),!0));return t.join("")}function Pe(e,t,n,r){if(t){var i=-1,o=!1,s=T&&"bottomLeft"===n;if(e.images&&e.images[0]){var a=+e.images[0][1],c=+e.images[0][2],u=s?r?176:200:90;a>u&&(c=c*u/a,a=u),s&&a<u&&(c=c*u/a,a=u),i=X[n].registerImageStyle(a,c,Ie(e.images[0][0])),o=!0}var l=Ae(e.adChoices,be('<div class="b-context__close b-js__hook" data-msh="close">','<div class="b-context__close-menu">','<div class="b-context__close-menu_cnt">',e.adChoices.options.map((function(e){return be('<div class="b-context__close-menu_i b-js__hook" data-msh="closeLink" data-options="'+Ie(JSON.stringify(e))+'">',Ie(e.name),"</div>")})).join(""),"</div>",'<div class="b-context__close-menu_arw_w">','<div class="b-context__close-menu_arw"></div>',"</div>","</div>","</div>"));return s?be('<div class="b-context__item b-context__item__v2 b-js_ad">',Ae(o,be('<div class="b-context__picture-w">','<div class="b-context__picture b-js__hook b-img-'+n+i+'" data-msh="link" data-nbh="'+Ie(e.url)+'">','<span class="b-context__marker">',Ce("Реклама"),"</span>",'<div class="b-context__contacts b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ie(e.domain),Ae(e.region,be('<span class="b-context__contacts__item">',Ie(e.region),"</span>")),"</div>","</div>",l,"</div>")),'<div class="b-context__title">','<div class="b-context__title__link b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ae(e.puny_domain,be('<img class="b-context__favicon" src="//favicon.yandex.net/favicon/'+Ie(e.puny_domain)+'" alt=""/>')),Ie(e.title),"</div>",Ae(!o,l),"</div>",'<div class="b-context__content b-context__content__link b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ie(e.body),"</div>",Ae(e.warning,be('<div class="b-context__warning">',Ie(e.warning),"</div>")),"</div>"):be('<div class="b-context__item b-js_ad">','<div class="b-context__title">','<div class="b-context__title__link b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ae(e.puny_domain,be('<img class="b-context__favicon" src="//favicon.yandex.net/favicon/'+Ie(e.puny_domain)+'" alt=""/>')),Ie(e.title),"</div>",l,"</div>",Ae(i>=0,be('<div class="b-context__picture b-js__hook b-img-'+n+i+'" data-msh="link" data-nbh="'+Ie(e.url)+'">','<span class="b-context__marker">',Ce("Реклама"),"</span>","</div>")),'<div class="b-context__content b-context__content__link b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ie(e.body),"</div>",'<div class="b-context__contacts b-context__contacts__item b-context__contacts__item_link b-js__hook" data-msh="link" data-nbh="'+Ie(e.url)+'">',Ie(e.domain),Ae(e.region,be('<span class="b-context__contacts__item">',Ie(e.region),"</span>")),"</div>",Ae(e.warning,be('<div class="b-context__warning">',Ie(e.warning),"</div>")),"</div>")}var d=e.puny_domain?'<img class="b-context__favicon" src="//favicon.yandex.net/favicon/'+Ie(e.puny_domain)+'" alt=""/>':"",h='<div class="b-context__title"><a class="b-context__title__link" href="'+Ie(e.url)+'" target="_blank">'+d+Ie(e.title)+"</a></div>",f=e.images&&e.images[0]?'<div class="b-context__picture"><a href="'+Ie(e.url)+'" target="_blank"><img src="'+Ie(e.images[0][0])+'" width="'+Ie(e.images[0][1])+'" height="'+Ie(e.images[0][2])+'" alt=""/></a></div>':"",p='<div class="b-context__content"><a class="b-context__content__link" href="'+Ie(e.url)+'" target="_blank">'+Ie(e.body)+"</a></div>",m=e.region?'<span class="b-context__contacts__item">'+Ie(e.region)+"</span>":"";return'<div class="b-context__item">'+h+f+p+('<div class="b-context__contacts"><a class="b-context__contacts__item b-context__contacts__item_link" href="'+Ie(e.url)+'" target="_blank">'+Ie(e.domain)+"</a>"+m+"</div>")+(e.warning?'<div class="b-context__warning">'+Ie(e.warning)+"</div>":"")+"</div>"}function ke(e,t,n){e&&(Ne(e,t),n.stopPropagation())}function Ne(e,n){if(t.success(v,n,"click"),m){var r="/dk?cmd=logExternal&st.name=externalLinkRedirect&st.link="+window.encodeURIComponent(e)+"&st.sig="+g,i=window.open(r),o=function(){i.location.href=e,i.removeEventListener("load",o)};i.addEventListener("load",o,!1)}else window.open(e)}return{version:1,activate:function(e){var t=e.getAttribute("data-config");"{"!==t[0]&&(t=atob(t)),(t=JSON.parse(t)).removeEl&&e.parentNode.removeChild(e),O=t.mimicUrl||O,T=t.tplV2Enabled||!1,w=t.topRightBannerEnabled||!1,L=t.messagesBannerEnabled||!1,I=t.discussionsBannerEnabled||!1,b=t.bottomLeftBannerEnabled||!1,P=t.statId||P,k=t.pixelId||k,R=t.refreshEnabled||!1,D=t.refreshInterval||D,x=t.pageId||x,K=t.whitelistSelector||K,M=t.secretCmd||"",H=t.secretFeedReplaceCmd||"",t.useHttp||!1,t.debugOrigin,A=t.smokescreenTopRightEnabled||!1,t.smokescreenDiscussionsEnabled||!1,t.smokescreenMessagesEnabled||!1,S=t.smokescreenBottomLeftEnabled||!1,C=t.smokescreenRandomizeCss||!1,m=t.adLinksRedirectWrapperEnabled,g=t.redirectLinkToken,j=t.redesignEnabled,Y=t.sendPixelsThroughServer,d=function(e){if(!e)return null;if(!a.isUrlConstructorExists())return null;var t=[];return e.forEach((function(e){t.push(new URL(e,window.location.href).href)})),t}(t.cssUrls),"interactive"===document.readyState||"complete"===document.readyState?ve(t):document.addEventListener("DOMContentLoaded",(function(){ve(t)})),f()},ready:function(){return Promise.all([G,ge(),q()])},onHooksReady:p,detectAdBlock:ge,obfuscate:function(e,t,n){return q().then((function(){de(e,t,n)}))},obfuscateNow:de,obfuscateText:Ce,transform:function(e){return q().then((function(){return h.transform(e)}))},transformNow:function(e){return h.transform(e)},activateLocator:function(){return q()},openLink:Ne,attachTopRightBanner:function(e,t){return w&&e&&t?ye(t,0,"topRight"):Promise.reject()},getSecretFeedReplaceCmd:function(){return H}}})),define("OK/banners/BannerClickLog",["OK/utils/environment"],(function(e){"use strict";var t=e.isDebug,n=function(){};return n.prototype={_onclick:function(){OK.logging.logger.success("banner.place",this.place,"click"),t&&console.info("banner click "+this.place)},activate:function(e){this.place=e.getAttribute("data-place"),this._onclickHandler=this._onclick.bind(this),e.addEventListener("click",this._onclickHandler)},deactivate:function(e){e.removeEventListener("click",this._onclickHandler)}},n})),define("OK/Pushes",["OK/NewsFetchCoordinator"],(function(e){var t={};return{activate:function(){e.addBlock("PS")},subscribe:function(e,n){return t[e]||(t[e]=[]),t[e].push(n),function(){var r=t[e];if(r){var i=r.indexOf(n);i>=0&&r.splice(i,1),0===r.length&&delete t[e]}}},setNewContent:function(e){var n=OK.util.parseJsonCorrected(e);n&&Object.keys(n).forEach((function(e){var r=t[e];if(r){var i=n[e];r.forEach((function(e){e(i)}))}}))}}})),define("OK/core/ClientBlockId",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClientBlockId=void 0,function(e){e.popLayerClose="PopLayerClose",e.multiLayer="MultiLayer",e.popLayerPhoto="PopLayerPhoto",e.popLayerNewPhotoWrapper="PopLayerNewPhotoWrapper",e.popLayerMediaTopic="PopLayerMediaTopic"}(e.ClientBlockId||(e.ClientBlockId={}))})),define("OK/core/urlExtension/ChallengesUrlExtension",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChallengesUrlExtension=void 0;var t=function(){this.CHALLENGES_URL_PART="marathons"};t.prototype.getName=function(){return this.CHALLENGES_URL_PART},t.prototype.isLayerUrl=function(e){return e&&e.includes(this.CHALLENGES_URL_PART)},t.prototype.isSkipHandleOnHistoryChanged=function(){return!1},t.prototype.handleOnHistoryChanged=function(e){return!!e.url&&(!!this.isLayerOpened()&&(this.closeLayer(),!0))},t.prototype.handleOnNavigate=function(e){return!!e&&(this.isLayerUrl(e)&&this.isLayerOpened()&&!this.isChallengeLayerLink(e)?(this.closeLayer(),!0):(this.isChallengeLayerCommand(e)&&this.closeMTLayer(),!1))},t.prototype.isChallengeLayerCommand=function(e){return e.includes(this.CHALLENGES_URL_PART)&&e.includes("st.layer.cmd=PopLayerChallenge")},t.prototype.isChallengeLayerLink=function(e){if(!e)return!1;var t=e.split("/");return 3===t.length&&!t[2]},t.prototype.isLayerOpened=function(){return"challenge"===window.OK.Layers.getTopLayerId()},t.prototype.closeLayer=function(){window.require(["OK/ChallengeLayer"],(function(e){(new e.ChallengeLayer).close()}))},t.prototype.closeMTLayer=function(){window.require(["OK/MediaLayer"],(function(e){return e.closeLayer()}))},e.ChallengesUrlExtension=t})),define("OK/core/urlExtension/URLData",["require","exports","OK/core/urlExtension/URLUtils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.URLData=void 0;var n=function(e,t,n,r,i,o,s){this.url=e,this.protocol=t,this.path=r,this.host=n,this.query=i,this.parts=o,this.params=s};n.prototype.getUrl=function(){return this.url},n.prototype.getProtocol=function(){return this.protocol},n.prototype.getHost=function(){return this.host},n.prototype.getProtocolAndHost=function(){return this.protocol?""+this.protocol+this.host:this.host},n.prototype.getPathAndQuery=function(){return this.query?this.path+"?"+this.query:this.path},n.prototype.getPath=function(){return this.path},n.prototype.getQuery=function(){return this.query},n.prototype.getParts=function(){return this.parts},n.prototype.getPartLen=function(){var e;return(null===(e=this.parts)||void 0===e?void 0:e.length)||0},n.prototype.getPart=function(e){return this.parts&&e>=0&&e<this.parts.length?this.parts[e]:null},n.prototype.contains=function(e){return this.url&&e&&this.url.toLowerCase().includes(e.toLowerCase())},n.prototype.getParams=function(){return this.params},n.prototype.getParam=function(e){var t;return null===(t=this.params)||void 0===t?void 0:t.get(e.toLowerCase())},n.prototype.hasParam=function(e){return!!this.getParam(e)},n.prototype.checkPath=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.length===this.getPartLen()&&(e=this).checkPathStartsWith.apply(e,t)},n.prototype.checkPathStartsWith=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(this.getPartLen()<e.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==n._PATH_ANY){var o=this.getPart(i);if(e[i]===n._PATH_DIGITS){if((0,t.isNumber)(o))continue;return!1}if(e[i]!==o)return!1}return!0},e.URLData=n,n._PATH_ANY="$$${_PATH_ANY}",n._PATH_DIGITS="$$${_PATH_DIGITS}"})),define("OK/core/urlExtension/urlExtensionsTypes",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IGwtModuleNavigationProperties=void 0;var t="st.",n=t+"cmd",r=t+"layer.",i=r+"cmd",o="_aid",s=t+o;e.IGwtModuleNavigationProperties={URL_MODEL_PREFIX:t,URL_MODEL_ID_KEY:n,URL_LAYER_PREFIX:r,URL_LAYER_ID_KEY:i,URL_COMMAND_KEY:"cmd",ACTIVITY_ID_KEY:o,URL_ACTIVITY_ID_KEY:s}})),define("OK/core/urlExtension/URLUtils",["require","exports","OK/core/urlExtension/URLData","OK/core/urlExtension/urlExtensionsTypes","OK/core/ClientBlockId"],(function(require,e,t,n,r){"use strict";function i(e){var t=o(e);if(t){var n=e.indexOf("/",t.length);return-1===n?"/":e.substring(n)}return e}function o(t){for(var n="",r=0;r<e.PROTOCOL_SCHEMAS.length;r++){var i=e.PROTOCOL_SCHEMAS[r];if(t.toLowerCase().startsWith(i)){n=i;break}}return n}function s(e){var t=e.substring(e.indexOf("?")+1);return new URLSearchParams(t)}function a(e){return s(e).get(n.IGwtModuleNavigationProperties.URL_MODEL_ID_KEY)}Object.defineProperty(e,"__esModule",{value:!0}),e.getDesktopModelIdFromUrl=e.isDesktopModelChanged=e.isNumber=e.getSearchParamsFromUrl=e.unregisterLast=e.getTopLayerId=e.isLayerOpened=e.isLinkOnLayerClose=e.isLinkOnLayer=e.parseUrl=e.extractSchema=e.extractPathAndQueryFromUrl=e.PROTOCOL_SCHEMAS=void 0,e.PROTOCOL_SCHEMAS=["http://","https://"],e.extractPathAndQueryFromUrl=i,e.extractSchema=o,e.parseUrl=function(e,n){void 0===n&&(n=!0);var r,s,a=o(e),c=i(e),u=a.length||0,l=e.indexOf("/",u),d=e.substring(u,l<0?e.length:l),h=c.indexOf("?");h<0?(r=c,s=""):(r=c.substring(0,h),s=c.substring(h+1));var f=r.split("/").reduce((function(e,t){if(t){var r=t.toLowerCase();n&&(r=decodeURIComponent(t)),e.push(r)}return e}),[]),p=new Map;return s.split("&").forEach((function(e){if(e){var t=e.indexOf("=");if(-1!==t){var r=e.substring(0,t),i=e.substring(t+1);n&&(i=decodeURIComponent(i.replace(/\+/g,"%20"))),p.set(r.toLowerCase(),i)}}})),new t.URLData(e,a,d,r,s,f,p)},e.isLinkOnLayer=function(e){return e.includes(n.IGwtModuleNavigationProperties.URL_LAYER_ID_KEY+"=")&&!this.isLinkOnLayerClose(e)},e.isLinkOnLayerClose=function(e){return e.includes(n.IGwtModuleNavigationProperties.URL_LAYER_ID_KEY+"="+r.ClientBlockId.popLayerClose)},e.isLayerOpened=function(e){return!!window.OK.Layers.isAnyLayerOpened&&window.OK.Layers.isLayerOpened(e)},e.getTopLayerId=function(){return window.OK.Layers.getTopLayerId?window.OK.Layers.getTopLayerId():null},e.unregisterLast=function(){OK.Layers.unregisterLast&&OK.Layers.unregisterLast()},e.getSearchParamsFromUrl=s,e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(Number(e))},e.isDesktopModelChanged=function(e){var t=window.OK.getCurrentDesktopModelId(),n=a(e);return n&&n!==t},e.getDesktopModelIdFromUrl=a})),define("OK/core/urlExtension/DailyPhotoUrlExtension",["require","exports","OK/core/urlExtension/URLUtils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DailyPhotoUrlExtension=void 0;var n=function(){this.DAILY_PHOTO_URL_PART="dailyphoto",this.DAILY_PHOTO_OWNER_PART="owner",this.DAILY_PHOTO_GROUP_PART="group",this.DAILY_PHOTO_SYSTEM_PART="system",this.DAILY_PHOTO_CHALLENGE_PART="contest",this.DAILY_PHOTO_CHALLENGE_RATING_PHOTO_ID="rating",this.RATING_OWNER_ID="3_2",this.RATING_PHOTO_ID="2",this.CHALLENGE_ID_USER_PREFIX="4_",this.GROUP_ID_USER_PREFIX="1_"};n.prototype.getName=function(){return this.DAILY_PHOTO_URL_PART},n.prototype.isLayerUrl=function(e){return this.isDailyPhotoUrl((0,t.parseUrl)(e).getParts())&&!e.includes("cmd=PopLayerOver")&&!e.includes("st.layer.cmd")},n.prototype.isSkipHandleOnHistoryChanged=function(){return!0},n.prototype.handleOnHistoryChanged=function(e){var t=e.url;return!!t&&(!(this.isLayerUrl(t)||!this.isLayerOpened())&&(this.hide(),!0))},n.prototype.handleOnNavigate=function(e){if(!e)return!1;if(this.isLayerUrl(e)){var n=(0,t.parseUrl)(e).getParts();if(this.DAILY_PHOTO_URL_PART===n[n.length-2]){var r=n[n.length-3];this.DAILY_PHOTO_GROUP_PART===n[0]&&(r=this.GROUP_ID_USER_PREFIX+r);var i=n[n.length-1];this.openPhoto(r,i)}else{if(this.DAILY_PHOTO_OWNER_PART===n[1])if(this.DAILY_PHOTO_SYSTEM_PART===n[2])this.openOwnersRating();else{var o=n[2],s=n[3];this.openPhoto(o,s)}if(this.DAILY_PHOTO_CHALLENGE_PART===n[1]){var a=n[2];this.isChallengeRatingOpenLink(n)?this.openChallengeRating(a):this.openChallengePage(a)}}return!0}return this.layerShouldBeClosed(e)&&this.hide(),!1},n.prototype.layerShouldBeClosed=function(e){return this.isLayerOpened()&&(!e.includes("cmd=PopLayer")||e.includes("st.layer.cmd=PopLayerClose"))&&!e.includes("cmd=DailyPhotoSubscribeAuthor")},n.prototype.isChallengeRatingOpenLink=function(e){return e.length>3&&this.DAILY_PHOTO_URL_PART===e[0]&&this.DAILY_PHOTO_CHALLENGE_PART===e[1]&&this.DAILY_PHOTO_CHALLENGE_RATING_PHOTO_ID===e[3]},n.prototype.openChallengePage=function(e){this.onUrlChange(this.CHALLENGE_ID_USER_PREFIX+e,null)},n.prototype.openChallengeRating=function(e){this.onUrlChange(this.CHALLENGE_ID_USER_PREFIX+e,this.DAILY_PHOTO_CHALLENGE_RATING_PHOTO_ID)},n.prototype.openOwnersRating=function(){this.onUrlChange(this.RATING_OWNER_ID,this.RATING_PHOTO_ID)},n.prototype.openPhoto=function(e,t){this.onUrlChange(e,t)},n.prototype.isDailyPhotoUrl=function(e){return!(e.length<2)&&(this.DAILY_PHOTO_URL_PART===e[0]||(this.DAILY_PHOTO_URL_PART===e[e.length-1]||e.length>2&&this.DAILY_PHOTO_URL_PART===e[e.length-2]))},n.prototype.isLayerOpened=function(){var e="OK/dailyphoto/dailyphoto-model";if(window.require.defined(e)){var t=window.require(e);return t.isLayerOpened&&t.isLayerOpened()}return window.OK.Layers&&"dailyphoto"===window.OK.Layers.getTopLayerId()},n.prototype.hide=function(){window.require(["OK/dailyphoto/dailyphoto-model"],(function(e){e.closeLayer&&e.closeLayer(!0)}))},n.prototype.onUrlChange=function(e,t){window.require(["OK/dailyphoto/dailyphoto-model"],(function(n){n.handleUrl(e,t)}))},e.DailyPhotoUrlExtension=n})),define("OK/core/urlExtension/FeedbackLayerExtension",["require","exports","OK/core/urlExtension/URLUtils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeedbackLayerExtension=void 0;var n=function(){this.TOKEN="/marks"};n.prototype.getName=function(){return"FeedbackLayer"},n.prototype.isLayerUrl=function(e){if(!e||0!==e.indexOf(this.TOKEN))return!1;var t=document.createElement("a");return t.href=e.toLowerCase(),t.pathname===this.TOKEN||t.pathname.indexOf("/",this.TOKEN.length-1)===this.TOKEN.length},n.prototype.isSkipHandleOnHistoryChanged=function(){return!1},n.prototype.handleOnHistoryChanged=function(e){var t=e.url;return!!t&&(this.isLayerUrl(t)||this.isHidden()||this.hideLayer(),!1)},n.prototype.handleOnNavigate=function(e){var n=this.isLayerUrl(e),r=(0,t.isDesktopModelChanged)(e);if(n){if(e.indexOf("cmd=PopLayer")>-1)return!1;var i,o=document.createElement("a");o.href=e.toLowerCase();var s=o.pathname.substring(1).split("/");return s.length>1&&(i=s[1]),window.require(["OK/feedback/FeedbackLayerController"],(function(e){return e.open(i)})),!0}return(e.indexOf("st.layer.cmd=PopLayerClose")>-1||r&&0===e.indexOf("cmd=CommentLikeBlock"))&&this.hideLayer(),!1},n.prototype.isHidden=function(){var e="OK/feedback/FeedbackLayerController";if(window.require.defined(e)){var t=window.require(e);return!(t.isOpened&&t.isOpened())}return!1},n.prototype.hideLayer=function(){window.require(["OK/feedback/FeedbackLayerController"],(function(e){return e.hide()}))},n.prototype.showLayer=function(){window.require(["OK/feedback/FeedbackLayerController"],(function(e){return e.open()}))},e.FeedbackLayerExtension=n})),define("OK/core/urlExtension/FlowLayerExtension",["require","exports","OK/core/urlExtension/urlExtensionsTypes","OK/core/ClientBlockId","OK/core/urlExtension/URLUtils"],(function(require,e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FlowLayerExtension=void 0;var i=function(e){this.LAYER_ID="flow",this.SLASH="/",this.FLOW_PART="flow",this.HOBBY_PART="hobby",this.POP_LAYER_CLOSE=t.IGwtModuleNavigationProperties.URL_LAYER_ID_KEY+"="+n.ClientBlockId.popLayerClose,this.feed=e.hasAttribute("data-feed-mode"),this.hobby=e.hasAttribute("data-hobby-mode")};i.prototype.getName=function(){return"FlowLayer"},i.prototype.isLayerUrl=function(e){return this.feed&&e===this.SLASH+this.FLOW_PART||this.hobby&&e.startsWith(this.SLASH+this.HOBBY_PART+this.SLASH)},i.prototype.isSkipHandleOnHistoryChanged=function(){return!1},i.prototype.handleOnNavigate=function(e){return this.isLayerUrl(e)?(this.onUrlChange(e),!0):((0,r.isLayerOpened)(this.LAYER_ID)&&e.includes(this.POP_LAYER_CLOSE)&&this.close(),!1)},i.prototype.handleOnHistoryChanged=function(e){var t=e.url;return this.isLayerUrl(t)?((0,r.isLayerOpened)("flow")&&"flow"!==(0,r.getTopLayerId)()?(0,r.unregisterLast)():this.open(t),!0):!!(0,r.isLayerOpened)(this.LAYER_ID)&&(this.close(),!0)},i.prototype.open=function(e){var t=window.OK.hookModel.getHookById("Flow");if(t){var n=t.getInstance();n&&n.open(e)}},i.prototype.close=function(){var e=window.OK.hookModel.getHookById("Flow");if(e){var t=e.getInstance();t&&t.close()}},i.prototype.onUrlChange=function(e){var t=window.OK.hookModel.getHookById("Flow");if(t&&t.getInstance){var n=t.getInstance();if(n){var r="cmd=Flow";-1!==e.indexOf("?")?n.open(e+"&"+r):n.open(e+"?"+r)}}},e.FlowLayerExtension=i})),define("OK/core/urlExtension/Messages2LayerUrlExtension",["require","exports","OK/core/urlExtension/URLData","OK/core/urlExtension/URLUtils"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Messages2LayerUrlExtension=void 0;var r=function(){};r.prototype.getName=function(){return"MessagesLayer2"},r.prototype.isLayerUrl=function(e){return this.isLayerUrlData((0,n.parseUrl)(e))},r.prototype.isSkipHandleOnHistoryChanged=function(){return!0},r.prototype.handleOnHistoryChanged=function(e){return!(this.isLayerUrl(e.url)||!this.isOpen())&&(this.close(),!0)},r.prototype.handleOnNavigate=function(e){var t=(0,n.parseUrl)(e);return this.isLayerUrlData(t)?!t.contains("cmd=PopLayer")&&!t.contains("cmd=MediaTopicLayerBody")&&(this.onUrlChange(e),!0):(this.isLayerShouldBeClosed(e)&&this.close(),!1)},r.prototype.isLayerShouldBeClosed=function(e){return!!this.isOpen()&&(!(0,n.isLinkOnLayer)(e)&&!e.includes(r.MSG_LAYER2_REQUEST+"=")&&(!(0,n.isLinkOnLayerClose)(e)||(this.isMessagesLayerOnTop()||!window.OK.historyManager.getState())))},r.prototype.isMessagesLayerOnTop=function(){return"messages"===window.OK.Layers.getTopLayerId()},r.prototype.isLayerUrlData=function(e){return e.checkPathStartsWith(r.TOKEN)||e.checkPathStartsWith(r.GROUP,t.URLData._PATH_DIGITS,r.TOKEN)||e.checkPathStartsWith(t.URLData._PATH_ANY,r.TOKEN)},r.prototype.isOpen=function(){var e="OK/messages2/layer";if(window.require.defined(e)){var t=window.require(e);return t.isOpen&&t.isOpen()}return!1},r.prototype.close=function(){return window.require(["OK/messages2/layer"],(function(e){e.close()}))},r.prototype.onUrlChange=function(e){window.require(["OK/messages2/layer"],(function(t){t&&t.open(e)}))},e.Messages2LayerUrlExtension=r,r.GROUP="group",r.TOKEN="messages",r.MSG_LAYER2_REQUEST="msgeLIR"})),define("OK/core/urlExtension/MultiLayerUrlExtension",["require","exports","OK/core/urlExtension/urlExtensionsTypes","OK/core/ClientBlockId"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiLayerUrlExtension=void 0;var r=function(){this.ANCHOR=t.IGwtModuleNavigationProperties.URL_COMMAND_KEY+"="+n.ClientBlockId.multiLayer};r.prototype.getName=function(){return"MultiLayer"},r.prototype.handleOnHistoryChanged=function(){return!1},r.prototype.isLayerUrl=function(){return!0},r.prototype.isSkipHandleOnHistoryChanged=function(){return!1},r.prototype.handleOnNavigate=function(e){return!!e.includes(this.ANCHOR)&&(this.open(e),!0)},r.prototype.open=function(e){window.require(["OK/MultiLayer"],(function(t){return t.open(e)}))},e.MultiLayerUrlExtension=r})),define("OK/core/urlExtension/MusicLayerExtension",["require","exports","OK/core/urlExtension/URLUtils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MusicLayerExtension=void 0;var n=function(){this.SLASH="/",this.LINK="music",this.LAYER_ID="music_app"};n.prototype.getName=function(){return"MusicLayer"},n.prototype.isLayerUrl=function(e){return this.isMusicUrl(e)},n.prototype.isSkipHandleOnHistoryChanged=function(){return!0},n.prototype.handleOnHistoryChanged=function(e){var t=e.url;if(!t)return!1;var n=t.indexOf("?");return n>0&&(t=t.substring(0,n)),!(this.isLayerUrl(t)||!this.isLayerOpened())&&(this.hide(),!0)},n.prototype.handleOnNavigate=function(e){return!!e&&(this.isLayerUrl(e)?(this.onUrlChange(e),window.OK.hookModel.setHookContent("PopLayerVideo",""),!0):(this.layerShouldBeClosed(e)&&this.hide(),!1))},n.prototype.layerShouldBeClosed=function(e){return this.isLayerOpened()&&(!e.includes("cmd=PopLayer")||e.includes("st.layer.cmd=PopLayerClose"))&&!e.includes("st.dntcls=true")},n.prototype.isLayerOpened=function(){return(0,t.isLayerOpened)(this.LAYER_ID)},n.prototype.hide=function(){window.require(["OK/music2/layer"],(function(e){return e.close()}))},n.prototype.onUrlChange=function(e){window.require(["OK/music2/layer"],(function(t){return t.open(e)}))},n.prototype.isMusicUrl=function(e){if(!e)return!1;var t=(e=e.toLowerCase()).indexOf("?");if(-1!==t){var n=e.substring(t+1);if(n.startsWith("cmd=")||n.includes("&cmd="))return!1;var r=e.substring(0,t);return this.accept(r)}return this.accept(e)},n.prototype.accept=function(e){return e===this.SLASH+this.LINK||e.startsWith(this.SLASH+this.LINK+this.SLASH)},n.prototype.pushState=function(e){window.OK.historyManager.pushState(e)},e.MusicLayerExtension=n})),define("OK/core/urlExtension/PhotoLayerExtension",["require","exports","OK/core/urlExtension/urlExtensionsTypes","OK/core/ClientBlockId"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhotoLayerExtension=void 0;var r=function(){};r.prototype.getName=function(){return"PhotoLayer"},r.prototype.handleOnHistoryChanged=function(){return!1},r.prototype.isLayerUrl=function(){return!1},r.prototype.isSkipHandleOnHistoryChanged=function(){return!1},r.prototype.handleOnNavigate=function(e){var r=e.includes(t.IGwtModuleNavigationProperties.URL_COMMAND_KEY+"="+n.ClientBlockId.popLayerPhoto);return(e.includes(t.IGwtModuleNavigationProperties.URL_COMMAND_KEY+"="+n.ClientBlockId.popLayerNewPhotoWrapper)||r)&&window.OK.loader.use(["OKCustomJs"],(function(){window.OK.Layers.push(e)})),!1},e.PhotoLayerExtension=r})),define("OK/core/urlExtension/ReactUrlExtension",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactUrlExtension=void 0;var t=function(){};t.prototype.getName=function(){return"ReactUrl"},t.prototype.handleOnHistoryChanged=function(e){return this.sendEvent(e.url)},t.prototype.isLayerUrl=function(){return!1},t.prototype.isSkipHandleOnHistoryChanged=function(){return!1},t.prototype.sendEvent=function(e){var t=new CustomEvent("reacturlchange",{bubbles:!0,cancelable:!0,detail:e});return!1===document.documentElement.dispatchEvent(t)||t.defaultPrevented},t.prototype.handleOnNavigate=function(){return!1},e.ReactUrlExtension=t})),define("OK/core/urlExtension/PostingFormUrlExtension",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PostingFormUrlExtension=void 0;var t=function(){};t.prototype.getName=function(){return"PostingForm"},t.prototype.isLayerUrl=function(){return!1},t.prototype.isSkipHandleOnHistoryChanged=function(){return!1},t.prototype.handleOnHistoryChanged=function(){if(window.OK&&window.OK.pf&&window.OK.pf.getBeforeUnloadMessage){var e=window.OK.pf.getBeforeUnloadMessage(!0);if(""!==e){var t=window.confirm(e);return window.OK.pf.log("exit.custom."+(t?"leave":"stay")),!t}window.OK.pf.log("exit.custom.empty")}return!1},t.prototype.handleOnNavigate=function(){return!1},e.PostingFormUrlExtension=t})),define("OK/core/urlExtension/NotificationsLayerExtension",["require","exports","OK/logger","OK/core/urlExtension/urlExtensionsTypes"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationsLayerExtension=void 0;var r=function(){this.TOKEN="notifications",this.SLASH="/",this.TOKEN_WITH_SLASHES=this.SLASH+this.TOKEN+this.SLASH};r.prototype.getName=function(){return"NotificationsLayer"},r.prototype.isLayerUrl=function(e){return e&&e.toLowerCase().startsWith(this.SLASH+this.TOKEN)},r.prototype.isSkipHandleOnHistoryChanged=function(){return!1},r.prototype.handleOnHistoryChanged=function(e){try{var r=e.url;if(this.isLayerUrl(r)){if(this.isHidden())this.showLayer(),e.url=null;else{var i=window.OK.getCurrentStateLink(),o="cmd=NotificationsLayerContent&st.noHist=on&st.ntf.cat="+this.getCategoryFromUrl(r);if(!r.includes(n.IGwtModuleNavigationProperties.URL_MODEL_ID_KEY)){var s=i.split("?");s[1]&&(o=o+"&"+encodeURIComponent(s[1]))}e.url=r+(r.includes("?")?"&":"?")+o}return!0}}catch(e){t.success("ntf","ext","history"),this.initModules()}return this.hideLayer(),!1},r.prototype.getCategoryFromUrl=function(e){if(e.includes("?")&&(e=e.substring(0,e.indexOf("?"))),e===this.SLASH+this.TOKEN)return"All";var t=e.replace(this.TOKEN_WITH_SLASHES,"");return t[0].toUpperCase()+t.substring(1)},r.prototype.handleOnNavigate=function(e){if(!window.require.defined("OK/Notifications")||!window.require.defined("OK/ToolbarGrowl"))return t.success("ntf","ext","handle"),this.initModules(),!1;var n=function(e){return 0===e.indexOf("/notifications")},r=n(window.OK.historyManager.getState());if(n(e)){if(e.indexOf("cmd=PopLayer")>-1||e.indexOf("cmd=SuggestedCoverSaveModalBlock")>-1)return!1;if(r)return this.showLoader(),!1;var i=this.getCategoryFromUrl(e);return this.showLayer({category:i}),!0}return r&&e.indexOf("st.layer.cmd=PopLayerClose")>-1&&this.hideLayer(),!1},r.prototype.isHidden=function(){var e="OK/Notifications";if(window.require.defined(e)){var t=window.require(e);return!(t.LayerController&&t.LayerController.category())}return!0},r.prototype.hideLayer=function(){window.require(["OK/Notifications"],(function(e){return e.LayerController.hide()}))},r.prototype.showLayer=function(e){window.require(["OK/Notifications"],(function(t){return t.LayerController.show(e)}))},r.prototype.showLoader=function(){window.require(["OK/Notifications"],(function(e){return e.LayerController.showLoader()}))},r.prototype.showGrowl=function(){window.require(["OK/ToolbarGrowl"],(function(e){return e.showAny()}))},r.prototype.hideGrowl=function(){window.require(["OK/ToolbarGrowl"],(function(e){return e.hideAll()}))},r.prototype.initModules=function(){window.require(["OK/Notifications","OK/ToolbarGrowl"],(function(){}))},e.NotificationsLayerExtension=r})),define("OK/core/urlExtension/MTLayerExtension",["require","exports","OK/core/urlExtension/urlExtensionsTypes","OK/core/ClientBlockId","OK/core/urlExtension/URLUtils"],(function(require,e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MTLayerExtension=void 0;var i=function(){this.DATA_SET_PREFIX="st.mt.",this.LAYER_DATA_SET_PREFIX="st.layer.lg.",this.LAYER_OPENING_TIME="lot",this.RECO_CHAIN="rc",this.ID="id",this.EDIT="ed",this.PRE="p",this.OI="oi",this.TYPE="ot",this.HIST="hist",this.OPEN_RESHARED="or",this.BLOCK_INDEX="bi",this.HIDE_NAV="hn",this.BANNER_WRAPPER_ID="bwi",this.POSTING_HOBBY_TYPE="ht",this.POSTING_HOBBY_CATEGORY="hc",this.POSTING_MOTIVATOR_ID="mid",this.POSTING_QUESTION_ID="qid",this.POSTING_MOTIVATOR_ORIGIN="mor",this.POSTING_MOTIVATOR_SHOWCASE_KIND="msk",this.POSTING_MOTIVATOR_SHOWCASE_ENTRY_POINT="msep",this.POSTING_MOTIVATOR_VARIANT="miv",this.POSTING_LOG_PLACE="plpl",this.POSTING_MEMORY_ID="meid",this.POSTING_CHALLENGE_ID="chid",this.POSTING_CHALLENGE_CREATE_TYPE="chct",this.COMMENT_ID="cid",this.POSTING_INITIAL_PHOTO_TOKEN="ph_token",this.POSTING_INITIAL_PHOTO_IDS="init_photos",this.POSTING_INITIAL_AD_LINK_APP_ID="init_ad_link_app_id",this.POSTING_INITIAL_AD_LINK_CONTENT="init_ad_link_c",this.POSTING_INITIAL_AD_LINK_CONTENT_ID="init_ad_link_c_id",this.POSTING_INITIAL_ITEM_TYPE="init_t",this.POSTING_INITIAL_ITEM_IDS="init_adverts",this.POSTING_INITIAL_CONTENT_TYPE="init_ct",this.POSTING_INITIAL_DECORATOR_ID="init_dec_id",this.POSTING_INITIAL_BUTTON="init_btn",this.INNER="inner",this.AD="ad",this.FORCE_FOPEN="fop",this.NOTIF_TYPE="nt",this.ADVERT_SELECTION_ID="as",this.POSTING_ADS="ads",this.CREATE_AD_CAMPAIGN="cac",this.MT_LAYER_CMD=t.IGwtModuleNavigationProperties.URL_COMMAND_KEY+"="+n.ClientBlockId.popLayerMediaTopic,this.HIST_ON=this.DATA_SET_PREFIX+this.HIST+"=on",this.POP_LAYER_CLOSE=t.IGwtModuleNavigationProperties.URL_LAYER_ID_KEY+"="+n.ClientBlockId.popLayerClose,this.FEED_TYPE_ID="ftid",this.FEED_ID_MARKER="fidm",this.FEED_LOCATION_TYPE="flt",this.FEED_POSITION="fp",this.LAYER_SOURCE="lsrc"};i.prototype.getName=function(){return"MTLayer"},i.prototype.handleOnHistoryChanged=function(e){var t=e.url,n=(0,r.isDesktopModelChanged)(t);return t.includes(this.MT_LAYER_CMD)?(e.url=n?t.replace(this.MT_LAYER_CMD,this.HIST_ON):t+"&"+this.HIST_ON,!1):!(!this.isMTLayerVisible()||n)&&(this.closeMTLayer(),!0)},i.prototype.isLayerUrl=function(e){return e.includes(this.MT_LAYER_CMD)||e.includes(this.HIST_ON)},i.prototype.isSkipHandleOnHistoryChanged=function(){return!1},i.prototype.handleOnNavigate=function(e){return!!e.includes(this.MT_LAYER_CMD)&&(e.includes(this.POP_LAYER_CLOSE)&&this.closePopLayer(),this.openLayerWithParametersFromUrl(e),!0)},i.prototype.openLayerWithParametersFromUrl=function(e){var n,i=(0,r.getSearchParamsFromUrl)(e),o=i.get(t.IGwtModuleNavigationProperties.URL_ACTIVITY_ID_KEY),s=i.get(this.DATA_SET_PREFIX+this.ID),a=i.get(this.DATA_SET_PREFIX+this.TYPE),c=i.get(this.DATA_SET_PREFIX+this.OI),u=i.get(this.DATA_SET_PREFIX+this.HIST),l=i.get(this.DATA_SET_PREFIX+this.OPEN_RESHARED),d=i.get(this.DATA_SET_PREFIX+this.BLOCK_INDEX),h=i.get(this.DATA_SET_PREFIX+this.BANNER_WRAPPER_ID),f=i.get(this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_ID),p=i.get(this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_VARIANT),m=i.get(this.DATA_SET_PREFIX+this.POSTING_MEMORY_ID),g=i.get(this.DATA_SET_PREFIX+this.POSTING_QUESTION_ID),v=i.get(this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_ORIGIN),_=i.get(this.DATA_SET_PREFIX+this.POSTING_CHALLENGE_ID),y=i.get(this.DATA_SET_PREFIX+this.POSTING_LOG_PLACE),E=i.get(this.DATA_SET_PREFIX+this.POSTING_HOBBY_TYPE),O=i.get(this.DATA_SET_PREFIX+this.POSTING_HOBBY_CATEGORY),T=i.get(this.DATA_SET_PREFIX+this.POSTING_CHALLENGE_CREATE_TYPE),w=i.get(this.DATA_SET_PREFIX+this.COMMENT_ID),L="on"===(null===(n=i.get(this.DATA_SET_PREFIX+this.HIDE_NAV))||void 0===n?void 0:n.toLowerCase()),I=i.get(this.DATA_SET_PREFIX+this.EDIT),b=i.get(this.DATA_SET_PREFIX+this.PRE),A=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_PHOTO_TOKEN),S=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_PHOTO_IDS),C=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_APP_ID),P=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_CONTENT),k=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_CONTENT_ID),N=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_ITEM_TYPE),x=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_ITEM_IDS),R=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_CONTENT_TYPE),D=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_DECORATOR_ID),K=i.get(this.DATA_SET_PREFIX+this.POSTING_INITIAL_BUTTON),M=i.get(this.DATA_SET_PREFIX+this.INNER),H=i.get(this.DATA_SET_PREFIX+this.NOTIF_TYPE),B=i.get(this.DATA_SET_PREFIX+this.ADVERT_SELECTION_ID),F=i.get(this.DATA_SET_PREFIX+this.POSTING_ADS),U=i.get(this.DATA_SET_PREFIX+this.FORCE_FOPEN),G=i.get(this.DATA_SET_PREFIX+this.CREATE_AD_CAMPAIGN),j=i.get(this.LAYER_DATA_SET_PREFIX+this.FEED_TYPE_ID),Y=i.get(this.LAYER_DATA_SET_PREFIX+this.FEED_ID_MARKER),q=i.get(this.LAYER_DATA_SET_PREFIX+this.FEED_LOCATION_TYPE),X=i.get(this.LAYER_DATA_SET_PREFIX+this.FEED_POSITION),W=i.get(this.LAYER_DATA_SET_PREFIX+this.LAYER_SOURCE),V=i.get(this.LAYER_DATA_SET_PREFIX+this.RECO_CHAIN);c&&(o+="&"+this.DATA_SET_PREFIX+this.OI+"="+c),A&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_PHOTO_TOKEN+"="+A),S&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_PHOTO_IDS+"="+S),N&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_ITEM_TYPE+"="+N),x&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_ITEM_IDS+"="+x),C&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_APP_ID+"="+C),P&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_CONTENT+"="+P),k&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_AD_LINK_CONTENT_ID+"="+k),R&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_CONTENT_TYPE+"="+R),D&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_DECORATOR_ID+"="+D),K&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_INITIAL_BUTTON+"="+K),u&&(o+="&"+this.DATA_SET_PREFIX+this.HIST+"="+u),l&&(o+="&"+this.DATA_SET_PREFIX+this.OPEN_RESHARED+"="+l),d&&(o+="&"+this.DATA_SET_PREFIX+this.BLOCK_INDEX+"="+d),h&&(o+="&"+this.DATA_SET_PREFIX+this.BANNER_WRAPPER_ID+"="+h),f&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_ID+"="+f),p&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_VARIANT+"="+p),m&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_MEMORY_ID+"="+m),g&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_QUESTION_ID+"="+g),v&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_MOTIVATOR_ORIGIN+"="+v),_&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_CHALLENGE_ID+"="+_),T&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_CHALLENGE_CREATE_TYPE+"="+T),y&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_LOG_PLACE+"="+y),E&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_HOBBY_TYPE+"="+E,O&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_HOBBY_CATEGORY+"="+O)),I&&(o+="&"+this.DATA_SET_PREFIX+this.EDIT+"="+I),w&&(o+="&"+this.DATA_SET_PREFIX+this.COMMENT_ID+"="+encodeURIComponent(w)),M&&(o+="&"+this.DATA_SET_PREFIX+this.INNER+"="+M),H&&(o+="&"+this.DATA_SET_PREFIX+this.NOTIF_TYPE+"="+H),B&&(o+="&"+this.DATA_SET_PREFIX+this.ADVERT_SELECTION_ID+"="+B),F&&(o+="&"+this.DATA_SET_PREFIX+this.POSTING_ADS+"="+F),G&&(o+="&"+this.DATA_SET_PREFIX+this.CREATE_AD_CAMPAIGN+"="+G),U&&(o+="&"+this.DATA_SET_PREFIX+this.FORCE_FOPEN+"="+U),j&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.FEED_TYPE_ID+"="+j),Y&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.FEED_ID_MARKER+"="+Y),q&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.FEED_LOCATION_TYPE+"="+q),X&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.FEED_POSITION+"="+X),W&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.LAYER_SOURCE+"="+W),V&&(o+="&"+this.LAYER_DATA_SET_PREFIX+this.RECO_CHAIN+"="+V),"on"===b&&this.preloadPostingForm(),this.openMTLayer(s,a,o,!1,!1,L,null);var z=i.get("mt.scrollTop");z&&(0,r.isNumber)(z)&&this.scrollTop(Number(z))},i.prototype.scrollTop=function(e){window.scrollTo(0,e)},i.prototype.isMTLayerVisible=function(){var e=document.getElementById("mtLayer");return!(!e||!e.classList.contains("__active")||e.classList.contains("layer__disabled"))},i.prototype.navigateToMTLayer=function(e,t,n,r,i,o,s){null!=n&&(r||(r=""),r+="&"+this.DATA_SET_PREFIX+this.BLOCK_INDEX+"="+n),this.openMTLayer(e,t,r,i,o,!1,s)},i.prototype.openMTLayer=function(e,t,n,r,i,o,s){window.require(["OK/MediaLayer"],(function(a){var c=a.showTopicInLayer(e,t,n,r,"",undefined,!1,i,undefined,undefined,o);s&&c.fail((function(){s("fail")})).done((function(){s("success")}))}))},i.prototype.preloadPostingForm=function(){window.require(["PTS/postingFormJs"],(function(){})),window.require(["OK/postingForm/posting"],(function(){}))},i.prototype.closeMTLayer=function(){window.require("OK/MediaLayer",(function(e){return e.closeLayer()}))},i.prototype.closePopLayer=function(){var e=document.getElementById("popLayer_mo");e&&e.click()},e.MTLayerExtension=i})),define("OK/core/urlExtension",["require","exports","OK/core/ClientBlockId","OK/core/urlExtension/ChallengesUrlExtension","OK/core/urlExtension/DailyPhotoUrlExtension","OK/core/urlExtension/FeedbackLayerExtension","OK/core/urlExtension/FlowLayerExtension","OK/core/urlExtension/Messages2LayerUrlExtension","OK/core/urlExtension/MultiLayerUrlExtension","OK/core/urlExtension/MusicLayerExtension","OK/core/urlExtension/PhotoLayerExtension","OK/core/urlExtension/ReactUrlExtension","OK/core/urlExtension/PostingFormUrlExtension","OK/core/urlExtension/NotificationsLayerExtension","OK/core/urlExtension/MTLayerExtension","OK/utils/environment"],(function(require,e,t,n,r,i,o,s,a,c,u,l,d,h,f,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlExtensionHolder=void 0;var m=function(){this.extensions=this.initUrlExtensions(),this.isDebugMode=p.isDebug};m.prototype.initUrlExtensions=function(){var e=new Map,p=new n.ChallengesUrlExtension,m=new r.DailyPhotoUrlExtension,g=new i.FeedbackLayerExtension,v=new c.MusicLayerExtension,_=new u.PhotoLayerExtension,y=new l.ReactUrlExtension,E=new d.PostingFormUrlExtension,O=new h.NotificationsLayerExtension,T=new f.MTLayerExtension,w=new s.Messages2LayerUrlExtension;e.set(p.getName(),p),e.set(m.getName(),m),e.set(g.getName(),g),e.set(v.getName(),v),e.set(_.getName(),_),e.set(y.getName(),y),e.set(E.getName(),E),e.set(O.getName(),O),e.set(T.getName(),T),e.set(w.getName(),w);var L=document.getElementById("Flow");if(L){var I=new o.FlowLayerExtension(L);e.set(I.getName(),I)}if(document.getElementById("hook_Block_"+t.ClientBlockId.multiLayer)){var b=new a.MultiLayerUrlExtension;e.set(b.getName(),b)}return e},m.prototype.handleCustomUrlsOnNavigate=function(e){if(!this.extensions)return!1;for(var t=!1,n=Array.from(this.extensions.values()),r=0;r<n.length;r++){var i=n[r];try{(t=i.handleOnNavigate(e))&&this.isDebugMode&&console.log(" navigateOnUrl stopped by "+i.getName())}catch(e){var o=i?i.getName():null;window.OK.logging.logger.error("NF_EXT_NAV_"+o),t=!0}if(t)break}return t},m.prototype.handleCustomUrlsOnHistoryChanged=function(e){if(!this.extensions)return null;for(var t=!1,n=!1,r={url:e},i=Array.from(this.extensions.values()),o=0;o<i.length;o++){var s=i[o];try{var a=s.isLayerUrl(r.url);t=t||a,a&&(this.isDebugMode&&console.log(" historyToken accepted by "+s.getName()),s.isSkipHandleOnHistoryChanged()&&(n=!0))}catch(e){var c=s?s.getName():null;window.OK.logging.logger.error("NF_EXT_NAV_"+c)}}if(n)return r.url;for(var u=!1,l=0;l<i.length;l++){var d=i[l];try{var h=d.handleOnHistoryChanged(r);h&&this.isDebugMode&&console.log(" historyToken handled by "+d.getName()),u=u||h,r.url||this.isDebugMode&&console.log("null URL: "+d.getName())}catch(e){var f=d?d.getName():null;window.OK.logging.logger.error("NF_EXT_HIST"+f)}}return!u||t?r.url:null},e.UrlExtensionHolder=m})),define("b/primary",["OK/utils/utils","OK/utils/vanilla","OK/utils/throttle","OK/utils/debounce","OK/utils/requireBlock","OK/utils/dom","OK/utils/delegate","OK/utils/copyText","OK/utils/wheelEventOptions","OK/cookie","OK/utils/environment","OK/utils/inputCaretPosition","OK/LogClicks","OK/NewsFetchCoordinator","OK/CommentWidgetsController","OK/CommentWidgets","OK/ReshareWidgetsController","OK/FixedTopBock","OK/mrg/projects","OK/mrg/counters","OK/mrg/wamba","OK/HookModel","OK/ToolbarBubble","OK/ToolbarGrowl","OK/css-loader","OK/banners/StickyBannerContainer","OK/banners/SmokescreenImgStyle","OK/banners/moneySaveV1","OK/banners/BannerClickLog","OK/Pushes","OK/core/urlExtension"],{});
//# sourceMappingURL=/res/source-maps/js/b/primary.js.map