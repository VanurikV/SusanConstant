define("OK/menu/dropdown/PositionManager",[],(function(){var e="left",t="center",i="right",n="sc-menu__top",r="sc-menu__left",o="sc-menu__right",s="bottom",l="left",a="right";function h(e){this._menu=e}return h.ALIGN_LEFT=e,h.ALIGN_CENTER=t,h.ALIGN_RIGHT=i,h.ORIENTATION_B=s,h.ORIENTATION_T="top",h.ORIENTATION_L=l,h.ORIENTATION_R=a,h.prototype={fixParent:function(){var e=this._menu,t=e.getEl(),i=e.getTargetEl();t.parentNode!==i&&(t.parentNode&&t.parentNode.removeChild(t),i.appendChild(t))},fix:function(){var e=this._menu.options.orientation;switch(e){case l:case a:return this.fixH(e);default:return this.fixV(e)}},fixV:function(t){var r,o,l,a,h,u=this._menu,c=u.options,d=u.getEl(),g=u.getTriggerEl(),f=u.getArrowEl(),m=u.getTargetEl(),_=d.style,v=(g.style,+c.margin),p=+c.vmargin,E=t,w=0;switch("1"!==c.noarrow&&(w=9),o=g.getBoundingClientRect(),l=m.getBoundingClientRect(),_.left=o.left-l.left+"px",_.top=o.top-l.top+"px",_.margin=0,r=d.getBoundingClientRect(),c.align){case e:a=v;break;case i:a=o.width-r.width-v;break;default:a=(o.width-r.width)/2+v}var b=window.innerHeight-(o.top+o.height+p),T=o.top;return b-=w,T-=w,E===s?b<r.height&&T>b?(h=-r.height-p-w,d.classList.add(n),E="top"):(h=o.height+p+w,d.classList.remove(n)):T<r.height&&b>T?(h=o.height+p+w,d.classList.remove(n),E=s):(h=-r.height-p-w,d.classList.add(n)),r.left+a<0&&(a=30-r.left),r.left+a+r.width>window.innerWidth&&(a=window.innerWidth-r.width-r.left-30),_.left=a+o.left-l.left+"px",_.top=h+o.top-l.top+"px",f&&(f.style.left=o.width/2-a+"px"),E},fixH:function(e){var t,i,n,s,h,u=this._menu,c=u.options,d=u.getEl(),g=u.getTriggerEl(),f=u.getArrowEl(),m=u.getTargetEl(),_=d.style,v=(g.style,+c.margin),p=+c.vmargin,E=e,w="1"!==u.options.noarrow;switch(w&&(v+=9),e===a?(d.classList.remove(r),d.classList.add(o)):(d.classList.remove(o),d.classList.add(r)),i=g.getBoundingClientRect(),n=m.getBoundingClientRect(),_.left=i.left-n.left+"px",_.top=i.top-n.top+"px",_.margin=0,t=d.getBoundingClientRect(),c.align){case"top":s=p;break;case"top":s=i.height-t.height-p;break;default:s=(i.height-t.height)/2+p}var b=window.innerWidth-(i.left+i.width+v),T=i.left;switch(E){case a:b<t.width&&T>b&&(E=l);break;case l:T<t.width&&T<b&&(E=a)}return E===a?(h=i.width+v,d.classList.remove(r),d.classList.add(o)):(h=-t.width-v,d.classList.remove(o),d.classList.add(r)),t.top+s<0&&(s=30-t.top),t.top+s+t.height>window.innerHeight&&(s=window.innerHeight-t.height-t.top-30),_.top=s+i.top-n.top+"px",_.left=h+i.left-n.left+"px",w&&(f.style.top=i.height/2-s+"px"),E},destroy:function(){OK.util.clean(this)}},h})),define("OK/menu/dropdown/triggerEventWorker/Click",[],(function(){function e(e){this._menu=e,this._timeout=+e.options.timeoutForHide,this._onTriggerClick=this._onTriggerClick.bind(this),this._onTriggerEnter=this._onTriggerEnter.bind(this),this._onTriggerLeave=this._onTriggerLeave.bind(this),this._onLeave=this._onLeave.bind(this);var t=e.getTriggerEl(),i=e.getEl();t.addEventListener("click",this._onTriggerClick),t.addEventListener("mouseleave",this._onTriggerLeave),t.addEventListener("mouseenter",this._onTriggerEnter),i.addEventListener("mouseleave",this._onTriggerLeave),i.addEventListener("mouseenter",this._onTriggerEnter),e.options.usePropagate||(this._onMenuClickHandler=this._onMenuClick.bind(this),i.addEventListener("click",this._onMenuClickHandler))}return e.prototype={_onTriggerEnter:function(){this._clearLeaveTimeout()},_onTriggerLeave:function(){this._leaveTimeout=setTimeout(this._onLeave,this._timeout)},_clearLeaveTimeout:function(){this._leaveTimeout&&(clearTimeout(this._leaveTimeout),this._leaveTimeout=null)},_onLeave:function(){this._clearLeaveTimeout(),this._menu.hide()},_onTriggerClick:function(e){e.preventDefault(),this._menu.toogle()},_onMenuClick:function(e){e.stopPropagation()},destroy:function(){var e=this._menu,t=e.getTriggerEl(),i=e.getEl();t.removeEventListener("click",this._onTriggerClick),t.removeEventListener("mouseleave",this._onTriggerLeave),t.removeEventListener("mouseenter",this._onTriggerEnter),i.removeEventListener("mouseleave",this._onTriggerLeave),i.removeEventListener("mouseenter",this._onTriggerEnter),this._clearLeaveTimeout(),this._onMenuClickHandler&&i.removeEventListener("click",this._onMenuClickHandler),OK.util.clean(this)}},e})),define("OK/menu/dropdown/triggerEventWorker/MouseEnter",[],(function(){function e(e){this._menu=e,this._timeoutForShow=+e.options.timeoutForShow,this._timeoutForHide=+e.options.timeoutForHide,this._onTriggerEnter=this._onTriggerEnter.bind(this),this._onTriggerLeave=this._onTriggerLeave.bind(this);var t=e.getTriggerEl(),i=e.getEl();i.addEventListener("mouseenter",this._onTriggerEnter),i.addEventListener("mouseleave",this._onTriggerLeave),t.addEventListener("mouseenter",this._onTriggerEnter),t.addEventListener("mouseleave",this._onTriggerLeave)}return e.prototype={_onTriggerEnter:function(e){this._jobDefferedHide?this._clearDefferedHideJob():this._jobDefferedShow=setTimeout(this._onJobDefferedShowSuccess.bind(this),this._timeoutForShow)},_onTriggerLeave:function(e){this._jobDefferedShow?this._clearDefferedShowJob():this._jobDefferedHide=setTimeout(this._onJobDefferedHideSuccess.bind(this),this._timeoutForHide)},_onJobDefferedShowSuccess:function(){this._jobDefferedShow=null,this._menu.show()},_onJobDefferedHideSuccess:function(){this._jobDefferedHide=null,this._menu.hide()},_clearDefferedShowJob:function(){this._jobDefferedShow&&(clearTimeout(this._jobDefferedShow),this._jobDefferedShow=null)},_clearDefferedHideJob:function(){this._jobDefferedHide&&(clearTimeout(this._jobDefferedHide),this._jobDefferedHide=null)},destroy:function(){this._clearDefferedShowJob(),this._clearDefferedHideJob();var e=this._menu,t=e.getTriggerEl(),i=e.getEl();i.removeEventListener("mouseenter",this._onTriggerEnter),i.removeEventListener("mouseleave",this._onTriggerLeave),t.removeEventListener("mouseenter",this._onTriggerEnter),t.removeEventListener("mouseleave",this._onTriggerLeave),OK.util.clean(this)}},e})),define("OK/menu/dropdown/DropDownTemplate",[],(function(){var e=document.createElement("div");return function(t){return function(t){t instanceof Array&&(t=t.join("")),e.innerHTML=t;var i=e.children[0];return e.removeChild(i),i}(['<div class="sc-menu sc-menu__hidden '+t.join(" ")+'">','<div class="sc-menu_arw_w">','<div class="sc-menu_arw"></div>',"</div>","</div>"])}})),define("OK/utils/dom",[],(function(){"use strict";var e='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function t(e,t){if(e){if(11===e.nodeType){for(var i=[],n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];r.getElementsByClassName&&(i=i.concat(Array.prototype.slice.call(r.getElementsByClassName(t))))}return i}return Array.prototype.slice.call(e.getElementsByClassName(t))}return[]}function i(e,t,i,n){for(n||(e=e.parentElement);e;){if(t(e))return e;if(i&&i===e)return null;e=e.parentElement}return e}var n=void 0;return{byClass:t,firstByClass:function(e,i){var n=t(e,i);return n.length?n[0]:null},querySelector:function(e,t){return e.querySelector(t)},querySelectorAll:function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))},parent:function(e,t,i,n){for(n||(e=e.parentElement);e;){if(!t||!e.classList||e.classList.contains(t))return e;if(i&&i===e)return null;e=e.parentElement}return e},traverseParents:i,getParentsAttrValue:function(e,t,n){var r=function(e){return e.getAttribute(t)},o=i(e,r,n,!0);return o?r(o):null},forEach:function(e,t){return Array.prototype.slice.call(e).forEach(t),e},innerHeight:function(e){try{return window.getComputedStyle(e,null).getPropertyValue("height")}catch(t){return e.currentStyle.height}},outerSize:function(e,t,i){var n;if("svg"===e.nodeName){var r=e.getBoundingClientRect();n=t?r.width:r.height}else n=t?e.offsetWidth:e.offsetHeight;if(null!==n){if(i){var o=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle;n+=t?parseInt(o.marginLeft,10)+parseInt(o.marginRight,10):parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)}return n}return 0},remove:function(e){var t;Array.isArray(e)||(e=[e]),e.forEach((function(e){(t=e.parentNode)&&t.removeChild(e)}))},one:function(e,t,i){e.addEventListener(t,(function e(t){return t.target.removeEventListener(t.type,e),i.call(this,t)}))},removeAllListeners:function(e){var t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e),t},toElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},isTextEditorFocused:function(){var e=document.activeElement;return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.hasAttribute("contenteditable")},isEventListenerOptionsSupported:function(){if(void 0!==n)return n;try{var e={};Object.defineProperty(e,"passive",{get:function(){return n=!0,!1}}),window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){n=!1}return n},isFocusableElement:function(t){return t.matches(e)&&!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden")&&!("true"===t.dataset.withoutFocus)},getKeyboardFocusableElements:function(t){return Array.from(t.querySelectorAll(e)).filter(function(e){return this.isFocusableElement(e)}.bind(this))},extractFocusableElement:function(e){return e?this.isFocusableElement(e)?e:this.getKeyboardFocusableElements(e)[0]:null}}})),define("OK/menu/DropdownMenu",["OK/utils/dom","OK/menu/dropdown/PositionManager","OK/menu/dropdown/triggerEventWorker/Click","OK/menu/dropdown/triggerEventWorker/MouseEnter","OK/menu/dropdown/DropDownTemplate","OK/EventFactory"],(function(e,t,i,n,r,o){var s;function l(e){this.options={noarrow:"0",triggerEvent:"mouseenter",timeoutForShow:500,timeoutForHide:250,trigger:!1,triggerActiveCls:!1,orientation:t.ORIENTATION_B,align:t.ALIGN_CENTER,margin:0,vmargin:0,elCls:[],hiddenCls:"sc-menu__hidden",activeCls:!1,target:"default",usePropagate:!1,hideOnBodyClick:!1},this._position=new t(this),this._disabled=!1,1===arguments.length&&e&&this._initOptions(e),this.onBeforeShow=o.create(),this.onShow=o.create(),this.onHide=o.create()}return l.prototype={_initOptions:function(e){Object.assign(this.options,e)},activate:function(e){e||(e=r(this.options.elCls)),this._el=e,this._arrowEl=e.querySelector(".sc-menu_arw_w"),this._initOptions(e.dataset);var t=this.options;if("parent"===t.target)this._targetEl=e.parentNode;else this._targetEl=document.getElementById("mainContainer"),null===this._targetEl&&(this._targetEl=document.getElementById("middleColumn"));switch(t.trigger instanceof Node?this._triggerEl=t.trigger:this._triggerEl=t.trigger?document.querySelector(t.trigger):e.parentNode,t.triggerEvent){case"click":this._triggerEventWorker=new i(this);break;case"none":break;default:this._triggerEventWorker=new n(this)}t.hideOnBodyClick&&(this.onBodyClick=this.onBodyClick.bind(this),document.body.addEventListener("click",this.onBodyClick,!0))},deactivate:function(){this.destroy()},destroy:function(){this._position.destroy(),this._triggerEventWorker&&this._triggerEventWorker.destroy(),this._el.parentNode&&this._el.parentNode.removeChild(this._el),this.options.hideOnBodyClick&&document.body.removeEventListener("click",this.onBodyClick,!0),OK.util.clean(this)},toogle:function(){this._visible?this.hide():this.show()},show:function(){if(!this._visible&&(this.onBeforeShow.trigger(),!this._disabled)){var e=this.options.triggerActiveCls;e&&this._triggerEl.classList.add(e),this._visible=!0,this._position.fixParent(),this.options.hiddenCls?this._el.classList.remove(this.options.hiddenCls):this._el.classList.add(this.options.activeCls),this._el.style.minWidth=this._triggerEl.offsetWidth-2*this.options.margin+"px",this.fixPosition(),s&&s!==this&&s.hide(),s=this,this.onShow.trigger()}},getCurrentPosition:function(){return this.currentPosition},isVisible:function(){return this._visible},hide:function(){if(this._visible){var e=this.options.triggerActiveCls;e&&this._triggerEl.classList.remove(e),this._visible=!1,this.options.hiddenCls?this._el.classList.add(this.options.hiddenCls):this._el.classList.remove(this.options.activeCls),s===this&&(s=null),this.onHide.trigger(),this.currentPosition=null}},fixPosition:function(){return this.currentPosition=this._position.fix(),this.currentPosition},getEl:function(){return this._el},getTriggerEl:function(){return this._triggerEl},getArrowEl:function(){return this._arrowEl},getTargetEl:function(){return this._targetEl},onBodyClick:function(t){var i=this._el,n=this._triggerEl;e.traverseParents(t.target,(function(e){return i===e||n===e}),null,!0)||this.hide()},disable:function(){this._disabled=!0},enabled:function(){this._disabled=!1}},l})),define("OK/menu/main/MoreBtn",["OK/menu/DropdownMenu"],(function(e){function t(e){this._createBtn(e.el)}return t.prototype={_createBtn:function(t){this._el=t,this._menu=new e({triggerEvent:"click",trigger:this._el,align:"left",margin:-10,vmargin:-5,elCls:""!==t.scMenuCls?["sc-menu__nopadding","__noarrow","__more-dropdown",t.scMenuCls]:["sc-menu__nopadding","__noarrow","__more-dropdown"]}),this._menu.activate()},getEl:function(){return this._el},addItem:function(e){this._menu.getEl().appendChild(e)},destroy:function(){this._menu.destroy(),OK.util.clean(this)}},t})),define("OK/utils/scrollHelper",["jquery"],(function(e){return{scrollToVisible:function(t,i){var n=e(i),r=e(t),o=r.offset().top,s=r.scrollTop(),l=r.height(),a=o+l,h=n.height(),u=n.offset().top;u+h>a?r.scrollTop(s+u+h-o-l+5):u<o&&r.scrollTop(s+u-o-5)},scrollInLoadMoreDataPosition:function(t){var i=e(t);return t.scrollHeight-i.scrollTop()-i.height()<=200},isScrollingVisible:function(e){var t=e.offsetHeight||0;return(e.scrollHeight||0)>t},scrollIntoOKViewport:function(e){var t=e.getBoundingClientRect().top+document.scrollingElement.scrollTop,i=document.getElementById("topPanel");i&&(t-=i.offsetHeight),document.scrollingElement.scrollTo(0,t)}}})),define("OK/menu/NavMenu",["OK/menu/DropdownMenu","OK/menu/main/MoreBtn","OK/utils/scrollHelper"],(function(e,t,i){function n(){this.options={itemCls:"",itemClsActive:"",scMenuCls:"",setVisible:"",withIcoProcess:"",btnMore:".mctc_navMenuDropdownSec",btnMoreCls:"",btnMoreTitle:"More",invisibleHeaderSelector:null}}return n.prototype={activate:function(e){this._el=e,this._initOptions(e.dataset);var n,r=[],o=[],s=e.children,l=this.options,a=l.itemCls,h=e.getAttribute("data-scroll-to-view");l.btnMoreCls?((n=document.createElement("a")).scMenuCls=l.scMenuCls,n.className=l.btnMoreCls,n.innerHTML=l.btnMoreTitle,e.appendChild(n)):n=e.querySelector(l.btnMore),l.invisibleHeaderSelector&&(this._invisibleHeader=document.querySelector(l.invisibleHeaderSelector)),this._moreBtnEl=n,r.push(this._moreBtnEl);for(var u=0;u<s.length;u++)this._moreBtnEl!==s[u]&&(s[u].classList.contains(a)?o.push(s[u]):r.push(s[u]));this._excludeItems=r,this._items=o,this._moreBtn=new t({el:this._moreBtnEl}),this._checkItems(),h&&(h=Number(h),isNaN(h)&&(h=0),h>=0&&(this._scrollTimeoutId=setTimeout((function(){i.scrollIntoOKViewport(e)}),h)))},_initOptions:function(e){Object.assign(this.options,e)},_checkItems:function(){var e,t,i,n,r,o,s=this._moreBtn,l=s.getEl(),a=this._el,h=window.getComputedStyle(a),u=this._excludeItems,c=this.options.itemClsActive,d=this.options.setVisible,g=this.options.withIcoProcess,f=this._items,m=this._invisibleHeader,_=0;for(l.style.display="",_=a.offsetWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight),o=0;o<u.length;o++)e=u[o],t=window.getComputedStyle(e),_-=e.offsetWidth+parseFloat(t.marginLeft)+parseFloat(t.marginRight);for(o=0;o<f.length&&(r=f[o],n=window.getComputedStyle(r),(i=r.offsetWidth+parseFloat(n.marginLeft)+parseFloat(n.marginRight))<_);o++)_-=i;var v,p=f.splice(o),E=!1;for(o=0;o<p.length;o++)v=p[o],c&&v.classList.contains(c)&&(E=!0,null!=m&&m.classList.contains("invisible")&&m.classList.remove("invisible")),g&&v.classList.remove("__without-ico"),s.addItem(v);p.length||(l.style.display="none"),E&&l.classList.add(c),d&&(a.style.overflow="visible")},deactivate:function(){clearTimeout(this._scrollTimeoutId),this._moreBtn.destroy(),OK.util.clean(this)}},n})),define("b/ddMenu",["OK/menu/dropdown/PositionManager","OK/menu/dropdown/triggerEventWorker/Click","OK/menu/dropdown/triggerEventWorker/MouseEnter","OK/menu/dropdown/DropDownTemplate","OK/menu/DropdownMenu","OK/menu/main/MoreBtn","OK/menu/NavMenu"],{});
//# sourceMappingURL=/res/source-maps/js/b/ddMenu.js.map